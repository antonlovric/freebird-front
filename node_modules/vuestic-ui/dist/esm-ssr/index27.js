import{w as e}from"./withConfigTransport.js";import{unref as o,isRef as t,watch as r,defineComponent as a,shallowRef as l,computed as n,toRef as s,mergeProps as d}from"vue";import{p as c,u,e as i}from"./usePopover.js";import{u as p}from"./useBem.js";import{u as m}from"./useCaptureEvent.js";import"./global-config.js";import"colortranslator";import{d as v}from"./debounce.js";import{a as f,u as b,b as h}from"./useStateful.js";import"./global-utils.js";import{ssrRenderAttrs as g,ssrRenderSlot as y,ssrRenderTeleport as C}from"@vue/server-renderer";import{u as k}from"./useColors.js";import{u as w}from"./useTextColor.js";import"./VaConfig.js";import"./isSymbol.js";import"./ssr-utils.js";import"./_createCompounder.js";import"./global-properties.js";import"./toNumber.js";const useClickOutside=(e,t)=>{m("click",(r=>{const a=r.target;var l;(l=e,Array.isArray(l)?l:[l]).some((e=>{return o(e)&&(t=o(e),!!(r=a)&&(r.parentElement===t||t.contains(r)));var t,r}))||t(a)}))},useDebounceFn=e=>{let a=null;const createDebounced=()=>v((()=>{null==a||a(),a=null}),o(e));let l=createDebounced();return t(e)&&r(e,(()=>{l=createDebounced()})),{debounced:e=>{a=e,l()},cancel:()=>l.cancel()}};var j=a({name:"VaDropdown",props:{...f,stateful:{default:!0},modelValue:{type:Boolean,default:!1},disabled:{type:Boolean},readonly:{type:Boolean},anchorSelector:{type:String,default:""},attachElement:{type:String,default:"body"},disableAttachment:{type:Boolean,default:!1},keepAnchorWidth:{type:Boolean,default:!1},isContentHoverable:{type:Boolean,default:!0},closeOnContentClick:{type:Boolean,default:!0},closeOnClickOutside:{type:Boolean,default:!0},closeOnAnchorClick:{type:Boolean,default:!0},hoverOverTimeout:{type:Number,default:30},hoverOutTimeout:{type:Number,default:200},offset:{type:[Array,Number],default:0},trigger:{type:String,default:"click",validator:e=>["click","hover","none"].includes(e)},placement:{type:String,default:"bottom",validator:e=>c.includes(e)}},emits:[...b,"anchor-click","dropdown-content-click","click-outside"],setup(e,{emit:o}){const t=l(),r=l(),{valueComputed:a}=h(e,o),d=n({get:()=>a.value&&!e.disabled&&!e.readonly,set(e){a.value=e}}),c=p("va-dropdown",(()=>i(e,["disabled"]))),m=n((()=>t.value&&e.anchorSelector&&t.value.querySelector(e.anchorSelector)||t.value));u(m,r,n((()=>({placement:e.placement,keepAnchorWidth:e.keepAnchorWidth,offset:e.offset,stickToEdges:!0,autoPlacement:!0,root:e.attachElement}))));const{debounced:v,cancel:f}=useDebounceFn(s(e,"hoverOverTimeout")),{debounced:b,cancel:g}=useDebounceFn(s(e,"hoverOutTimeout")),emitAndClose=(e,t)=>{o(e),t&&(d.value=!1)};return useClickOutside([t,r],(()=>{e.closeOnClickOutside&&d.value&&emitAndClose("click-outside",e.closeOnClickOutside)})),{valueComputed:d,anchorRef:t,contentRef:r,computedClass:c,emitAndClose:emitAndClose,onAnchorClick:()=>{"click"!==e.trigger||e.disabled||(d.value?emitAndClose("anchor-click",e.closeOnAnchorClick):(d.value=!0,o("anchor-click")))},onMouseEnter:()=>{"hover"!==e.trigger||e.disabled||(v((()=>{d.value=!0})),g())},onMouseLeave:()=>{"hover"!==e.trigger||e.disabled||(e.isContentHoverable?b((()=>{d.value=!1})):d.value=!1,f())}}}});j.ssrRender=function ssrRender$1(e,o,t,r,a,l,n,s){o(`<div${g(d({class:["va-dropdown",e.computedClass],"aria-haspopup":"listbox","aria-disabled":e.$props.disabled,"aria-expanded":!!e.valueComputed},r))}><div class="va-dropdown__anchor">`),y(e.$slots,"anchor",{},null,o,t),o("</div>"),e.valueComputed?C(o,(o=>{o('<div class="va-dropdown__content-wrapper">'),y(e.$slots,"default",{},null,o,t),o("</div>")}),e.attachElement,e.disableAttachment,t):o("\x3c!----\x3e"),o("</div>")},j.__file="src/components/va-dropdown/VaDropdown.vue";var S=a({name:"VaDropdownContent",props:{noPadding:{type:Boolean,default:!1},background:{type:String,default:"white"},textColor:{type:String}},setup(e){const{getColor:o}=k(),{textColorComputed:t}=w(s(e,"background"));return{computedStyle:n((()=>({background:o(e.background,void 0,!0),color:t.value,padding:e.noPadding?0:void 0})))}}});S.ssrRender=function ssrRender(e,o,t,r,a,l,n,s){o(`<div${g(d({class:"va-dropdown__content",style:e.computedStyle,role:"listbox"},r))}>`),y(e.$slots,"default",{},null,o,t),o("</div>")},S.__file="src/components/va-dropdown/components/VaDropdownContent/VaDropdownContent.vue";const O=e(S),A=e(j);export{A as VaDropdown,O as VaDropdownContent};
//# sourceMappingURL=index27.js.map
