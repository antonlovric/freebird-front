import{w as t}from"./withConfigTransport.js";import{mergeProps as i}from"vue";import{ssrRenderAttrs as s,ssrRenderSlot as e}from"@vue/server-renderer";import"./VaConfig.js";import"./global-config.js";import"./global-properties.js";var h={name:"VaScrollbar",props:{speed:{type:Number,default:20}},methods:{calcOnResize(){this.calcSize(),this.calcThumb()},calcSize(){this.isDown=this.isUp=!1,this.maxHeight=parseFloat(this.wrapper.offsetHeight,10),this.contentHeight=parseFloat(this.content.offsetHeight,10),this.trackHeight=parseFloat(this.track.offsetHeight,10),this.maxHeight/this.contentHeight*this.trackHeight<10?this.thumb.style.height="10px":this.thumb.style.height=this.maxHeight/this.contentHeight*this.trackHeight+"px",this.maxHeight/this.contentHeight<1?this.thumb.classList.add("active"):this.thumb.classList.remove("active")},calcThumb(){const t=""===this.content.style.marginTop?0:parseInt(this.content.style.marginTop,10);this.thumb.style.top=-t/this.contentHeight*this.trackHeight+"px"},onContentResize(){const t=this.contentHeight;this.calcSize(),this.calcThumb(),this.content.style.transition="margin-top .3s linear",this.thumb.style.transition="top .3s linear";const handler=t=>{"margin-top"===t.propertyName&&(this.content.style.transition="",this.calcSize(),this.calcThumb(),this.content.removeEventListener("transitionend",handler),this.thumb.style.transition="")};this.content.addEventListener("transitionend",handler),this.setVertical(this.contentHeight-t)},startDrag(t){this.isDragging=!0,this.prevTouch=t.touches[0]},onDrag(t){if(this.isDragging){t.preventDefault();const i=t.touches[0],s=this.prevTouch.clientY-i.clientY;this.setVertical(s),this.prevTouch=i}},stopDrag(){this.isDragging=!1},scroll(t){let i=.01*t.deltaY*this.speed;navigator?.userAgent?.toLowerCase().includes("firefox")&&(i*=10),this.setVertical(i),t.preventDefault()},setVertical(t){if(this.isDown&&t>0||this.isUp&&t<0||this.contentHeight<=this.maxHeight)return;const i=""===this.content.style.marginTop?0:parseFloat(this.content.style.marginTop,10);let s=0;this.maxHeight-(i-t)>this.contentHeight&&t>0?(s=this.maxHeight-this.contentHeight,this.isDown=!0):(this.isDown=!1,i-t>0?(this.isUp=!0,s=0):(s=i-t,this.isUp=!1)),this.content.style.marginTop=s+"px",this.calcThumb()}},mounted(){this.track=this.$refs.track,this.thumb=this.$refs.thumb,this.content=this.$refs.scrollbarContent,this.wrapper=this.$refs.scrollbarWrapper,this.calcOnResize(),window.addEventListener("resize",this.calcOnResize)},beforeUnmount(){window.removeAllListeners("resize",this.calcOnResize)},data:()=>({wrapper:void 0,maxHeight:void 0,thumb:void 0,track:void 0,trackHeight:void 0,content:void 0,contentHeight:void 0,isDown:!1,isUp:!0,prevTouch:{},isDragging:!1})};h.ssrRender=function ssrRender(t,h,n,r,o,a,c,l){h(`<div${s(i({class:"va-scrollbar",ref:"vuesticScrollbar"},r))}><div class="scrollbar-wrapper"><div class="scrollbar-content">`),e(t.$slots,"default",{},null,h,n),h('</div><div class="track"><div class="thumb"></div></div></div></div>')},h.__file="src/components/va-scrollbar/VaScrollbar.vue";const n=t(h);export{n as VaScrollbar};
//# sourceMappingURL=index58.js.map
