import{w as e}from"./withConfigTransport.js";import{defineComponent as t,shallowRef as n,computed as o,resolveComponent as s,mergeProps as a,createSlots as r,withCtx as u,openBlock as i,createBlock as l,createCommentVNode as c,createVNode as p,withModifiers as d,renderSlot as m}from"vue";import{s as v,o as f}from"./VaIcon.js";import{e as C}from"./usePopover.js";import"./global-config.js";import"./global-utils.js";import{u as b,a as g}from"./useFocus.js";import{u as y}from"./useColors.js";import{u as _}from"./useEmitProxy.js";import{u as j}from"./useForm.js";import{a as x,b as I}from"./useStateful.js";import{s as $}from"./css-utils.js";import{s as w}from"./VaInputWrapper.js";import{s as P}from"./VaButton.js";import{ssrRenderComponent as k,ssrRenderAttrs as B,ssrRenderStyle as N,ssrRenderSlot as S}from"@vue/server-renderer";import"./VaConfig.js";import"./useSize.js";import"./isSymbol.js";import"./ssr-utils.js";import"./global-properties.js";import"colortranslator";import"./useBem.js";import"./_createCompounder.js";import"./useCSSVariables.js";import"./index67.js";import"./useSyncProp.js";import"./consts.js";import"./index31.js";import"./useLoading.js";import"./useRouterLink.js";import"./useTextColor.js";import"./index43.js";import"./clamp.js";import"./toNumber.js";const{createEmits:V,createListeners:h}=_(["change"]),{createEmits:A,createListeners:L}=_([{listen:"click-prepend",emit:"click:decrease-button"},{listen:"click-append",emit:"click:increase-button"},{listen:"click-prepend-inner",emit:"click:decrease-icon"},{listen:"click-append-inner",emit:"click:increase-icon"}]);var M=t({name:"VaCounter",components:{VaInputWrapper:w,VaIcon:v,VaButton:P},props:{...j,...x,modelValue:{type:[String,Number],default:0},manualInput:{type:Boolean,default:!1},stateful:{type:Boolean,default:!1},min:{type:Number,default:void 0},max:{type:Number,default:void 0},step:{type:Number,default:1},label:{type:String,default:""},messages:{type:[Array,String],default:()=>[]},width:{type:[String,Number],default:"160px"},color:{type:String,default:"primary"},outline:{type:Boolean},bordered:{type:Boolean},increaseIcon:{type:String,default:"add"},decreaseIcon:{type:String,default:"remove"},buttons:{type:Boolean,default:!1},flat:{type:Boolean,default:!0},rounded:{type:Boolean,default:!1},margins:{type:[String,Number],default:"4px"},textColor:{type:String,default:void 0}},emits:["update:modelValue",...V(),...A(),...b],inheritAttrs:!1,setup(e,{emit:t,attrs:s}){const a=n(),{isFocused:r,focus:u,blur:i}=g(a,t),{valueComputed:l}=I(e,t),getRoundDownWithStep=t=>e.min&&e.step?e.min+e.step*Math.floor((t-e.min)/e.step):t,calculateCounterValue=t=>{e.min&&t<e.min?l.value=e.min:e.max&&t>e.max?l.value=getRoundDownWithStep(e.max):l.value=getRoundDownWithStep(t)},c=o((()=>!!e.min&&Number(l.value)<=e.min)),p=o((()=>!!e.max&&(e.step?Number(l.value)>e.max-e.step:Number(l.value)>=e.max))),d=o((()=>e.disabled?-1:0)),m=o((()=>c.value||e.readonly||e.disabled)),v=o((()=>p.value||e.readonly||e.disabled)),decreaseCount=()=>{m.value||calculateCounterValue(Number(l.value)-e.step)},increaseCount=()=>{v.value||calculateCounterValue(Number(l.value)+e.step)},{getColor:b}=y(),_=o((()=>b(e.color))),j=o((()=>({class:{"va-counter__icon--inactive":m.value},color:_.value,name:e.decreaseIcon,...!m.value&&{onClick:decreaseCount}}))),x=o((()=>({class:{"va-counter__icon--inactive":v.value},color:_.value,name:e.increaseIcon,...!v.value&&{onClick:increaseCount}}))),w=o((()=>0===("string"==typeof e.margins?parseFloat(e.margins):e.margins))),P=o((()=>({...C(e,["rounded","color","textColor"]),flat:e.flat&&!e.outline,outline:e.flat&&e.outline}))),k=o((()=>({...P.value,icon:e.decreaseIcon,disabled:m.value}))),B=o((()=>({...P.value,icon:e.increaseIcon,disabled:v.value}))),N=o((()=>({tabindex:d.value,ariaLabel:e.label||"counter value",ariaValuemin:e.min,ariaValuemax:e.max,...f(s,["class","style"]),...C(e,["disabled","min","max","step"]),readonly:e.readonly||!e.manualInput}))),S=o((()=>({...C(e,["color","readonly","disabled","messages","label","bordered","outline"])}))),V=o((()=>[s.class,{"va-counter--input-square":w.value}])),A=o((()=>({width:$(e.width),...s.style||{}}))),M=o((()=>$(e.margins)));return{input:a,valueComputed:l,isFocused:r,fieldListeners:L(t),inputListeners:h(t),inputAttributesComputed:N,inputWrapperPropsComputed:S,setCountInput:({target:e})=>{l.value=Number(null==e?void 0:e.value)},setCountChange:({target:e})=>{calculateCounterValue(Number(null==e?void 0:e.value))},decreaseCount:decreaseCount,increaseCount:increaseCount,decreaseIconProps:j,increaseIconProps:x,decreaseButtonProps:k,increaseButtonProps:B,colorComputed:_,classComputed:V,styleComputed:A,marginComputed:M,focus:u,blur:i}}});M.ssrRender=function ssrRender(e,t,n,o,v,f,C,b){const g=s("VaInputWrapper"),y=s("va-button"),_=s("va-icon");t(k(g,a({class:"va-counter"},{...e.fieldListeners,...e.inputWrapperPropsComputed},{class:e.classComputed,style:e.styleComputed,focused:e.isFocused},o),r({default:u(((t,n,o,s)=>{if(!n)return[e.$slots.content?c("v-if",!0):(i(),l("input",a({key:0,ref:"input",class:"va-input__content__input",type:"number",inputmode:"decimal"},{...e.inputAttributesComputed,...e.inputListeners},{value:e.valueComputed,onInput:e.setCountInput,onChange:e.setCountChange}),null,16,["value","onInput","onChange"]))];e.$slots.content?n("\x3c!----\x3e"):n(`<input${B(a({ref:"input",class:"va-input__content__input",type:"number",inputmode:"decimal"},{...e.inputAttributesComputed,...e.inputListeners},{value:e.valueComputed}))}${s}>`)})),_:2},[e.$props.buttons?{name:"prepend",fn:u(((t,n,o,s)=>{if(!n)return[p("div",{class:"va-counter__prepend-wrapper",style:{marginRight:e.marginComputed},onMousedown:d((t=>e.focus()),["prevent"])},[m(e.$slots,"decreaseAction",{...t,decreaseCount:e.decreaseCount},(()=>[p(y,a({class:"va-counter__button-decrease","aria-label":"decrease counter"},e.decreaseButtonProps,{onClick:t=>e.decreaseCount()}),null,16,["onClick"])]))],44,["onMousedown"])];n(`<div class="va-counter__prepend-wrapper" style="${N({marginRight:e.marginComputed})}"${s}>`),S(e.$slots,"decreaseAction",{...t,decreaseCount:e.decreaseCount},(()=>{n(k(y,a({class:"va-counter__button-decrease","aria-label":"decrease counter"},e.decreaseButtonProps),null,o,s))}),n,o,s),n("</div>")}))}:{name:"prependInner",fn:u(((t,n,o,s)=>{if(!n)return[p("div",{onMousedown:d((t=>e.focus()),["prevent"])},[m(e.$slots,"decreaseAction",{...t,decreaseCount:e.decreaseCount},(()=>[p(_,a({class:"va-counter__icon-decrease"},e.decreaseIconProps),null,16)]))],40,["onMousedown"])];n(`<div${s}>`),S(e.$slots,"decreaseAction",{...t,decreaseCount:e.decreaseCount},(()=>{n(k(_,a({class:"va-counter__icon-decrease"},e.decreaseIconProps),null,o,s))}),n,o,s),n("</div>")}))},e.$props.buttons?{name:"append",fn:u(((t,n,o,s)=>{if(!n)return[p("div",{class:"va-counter__append-wrapper",style:{marginLeft:e.marginComputed},onMousedown:d((t=>e.focus()),["prevent"])},[m(e.$slots,"increaseAction",{...t,increaseCount:e.increaseCount},(()=>[p(y,a({class:"va-counter__button-increase","aria-label":"increase counter"},e.increaseButtonProps,{onClick:t=>e.increaseCount()}),null,16,["onClick"])]))],44,["onMousedown"])];n(`<div class="va-counter__append-wrapper" style="${N({marginLeft:e.marginComputed})}"${s}>`),S(e.$slots,"increaseAction",{...t,increaseCount:e.increaseCount},(()=>{n(k(y,a({class:"va-counter__button-increase","aria-label":"increase counter"},e.increaseButtonProps),null,o,s))}),n,o,s),n("</div>")}))}:{name:"appendInner",fn:u(((t,n,o,s)=>{if(!n)return[p("div",{onMousedown:d((t=>e.focus()),["prevent"])},[m(e.$slots,"increaseAction",{...t,increaseCount:e.increaseCount},(()=>[p(_,a({class:"va-counter__icon-increase"},e.increaseIconProps),null,16)]))],40,["onMousedown"])];n(`<div${s}>`),S(e.$slots,"increaseAction",{...t,increaseCount:e.increaseCount},(()=>{n(k(_,a({class:"va-counter__icon-increase"},e.increaseIconProps),null,o,s))}),n,o,s),n("</div>")}))},e.$slots.content?{name:"content",fn:u(((t,n,o,s)=>{if(!n)return[p("div",{ref:"input",tabindex:"0"},[m(e.$slots,"content",{...t,value:Number(e.valueComputed)})],512)];n(`<div tabindex="0"${s}>`),S(e.$slots,"content",{...t,value:Number(e.valueComputed)},null,n,o,s),n("</div>")}))}:void 0]),n))},M.__file="src/components/va-counter/VaCounter.vue";const F=e(M);export{F as VaCounter};
//# sourceMappingURL=index22.js.map
