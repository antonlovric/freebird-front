import{w as e}from"./withConfigTransport.js";import{defineComponent as l,shallowRef as a,ref as t,computed as r,onMounted as o,onBeforeUnmount as v,mergeProps as i}from"vue";import{w as u}from"./utils.js";import{ssrRenderAttrs as n,ssrRenderAttr as s,ssrRenderStyle as d,ssrRenderSlot as p}from"@vue/server-renderer";import"./VaConfig.js";import"./global-config.js";import"./global-properties.js";import"./global-utils.js";var m=l({name:"VaParallax",props:{target:{type:[Object,String]},src:{type:String,default:"",required:!0},alt:{type:String,default:"parallax"},height:{type:Number,default:400},reversed:{type:Boolean,default:!1},speed:{type:Number,default:.5,validator:e=>e>=0&&e<=1}},setup(e){const l=a(),i=a(),n=t(0),s=t(0),d=t(0),p=t(0),m=t(0),c=t(0),g=t(0),f=t(!1),h=r((()=>({height:e.height+"px"}))),y=r((()=>({display:"block",transform:`translate(-50%, ${s.value}px)`,opacity:f.value?1:0,top:e.reversed?0:"auto"}))),x=r((()=>{var a;if(!e.target)return getScrollableParent(null===(a=l.value)||void 0===a?void 0:a.parentElement);if(e.target instanceof HTMLElement)return e.target;const t=document.querySelector(e.target);return t||(u("VaParallax target prop got wrong selector. Target is null"),null)})),getScrollableParent=e=>e?e.scrollHeight>e.clientHeight?e:getScrollableParent(e.parentElement):document.body,E=r((()=>{var e;return(null===(e=i.value)||void 0===e?void 0:e.naturalHeight)||0})),translate=()=>{(()=>{var a,t;const r=(null===(a=l.value)||void 0===a?void 0:a.getBoundingClientRect())||{top:0};m.value=(null===(t=x.value)||void 0===t?void 0:t.scrollTop)||0,d.value=E.value-e.height,n.value=r.top+m.value,c.value=window.innerHeight,g.value=m.value+c.value})(),p.value=(g.value-n.value)/(e.height+c.value),s.value=Math.round(d.value*p.value)*e.speed,e.reversed&&(s.value=-s.value)},addEventListeners=()=>{var e,l;null===(e=x.value)||void 0===e||e.addEventListener("scroll",translate),null===(l=x.value)||void 0===l||l.addEventListener("resize",translate)};return o((()=>{var e,l;(null===(e=i.value)||void 0===e?void 0:e.complete)?(translate(),addEventListeners()):null===(l=i.value)||void 0===l||l.addEventListener("load",(()=>{translate(),addEventListeners()}),!1),f.value=!0})),v((()=>{var e,l;null===(e=x.value)||void 0===e||e.removeEventListener("scroll",translate),null===(l=x.value)||void 0===l||l.removeEventListener("resize",translate)})),{img:i,rootElement:l,computedWrapperStyles:h,computedImgStyles:y}}});m.ssrRender=function ssrRender(e,l,a,t,r,o,v,u){l(`<div${n(i({ref:"rootElement",class:"va-parallax",style:e.computedWrapperStyles},t))}><div class="va-parallax__image-container"><img class="va-parallax__image"${s("src",e.$props.src)}${s("alt",e.$props.alt)} style="${d(e.computedImgStyles)}"></div><div class="va-parallax__item-container">`),p(e.$slots,"default",{},null,l,a),l("</div></div>")},m.__file="src/components/va-parallax/VaParallax.vue";const c=e(m);export{c as VaParallax};
//# sourceMappingURL=index40.js.map
