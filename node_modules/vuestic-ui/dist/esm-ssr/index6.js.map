{"version":3,"file":"index6.js","sources":["../../src/components/va-backtop/VaBacktop.vue","../../src/components/va-backtop/VaBacktop.vue?vue&type=template&id=17846d70&lang.js","../../src/components/va-backtop/index.ts"],"sourcesContent":["<template>\n  <div\n    v-if=\"visible\"\n    class=\"va-backtop\"\n    role=\"button\"\n    aria-label=\"back to top\"\n    :style=\"computedStyle\"\n    @click=\"scrollToTop\"\n    @keydown.enter.stop=\"scrollToTop\"\n  >\n    <slot>\n      <va-button\n        aria-hidden=\"true\"\n        icon=\"expand_less\"\n        :color=\"color\"\n      />\n    </slot>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, PropType, ref, computed, onMounted, onBeforeUnmount } from 'vue'\n\nimport { VaButton } from '../va-button'\n\nexport default defineComponent({\n  name: 'VaBacktop',\n  components: { VaButton },\n  props: {\n    target: {\n      type: [Object, String] as PropType<Element | string | undefined>,\n      default: undefined,\n    },\n    visibilityHeight: { type: Number, default: 300 },\n    speed: { type: Number, default: 50 },\n    verticalOffset: { type: String, default: '1rem' },\n    horizontalOffset: { type: String, default: '1rem' },\n    color: { type: String, default: '' },\n    horizontalPosition: {\n      type: String as PropType<'right' | 'left'>,\n      default: 'right',\n      validator: (value: string) => ['right', 'left'].includes(value),\n    },\n    verticalPosition: {\n      type: String as PropType<'bottom' | 'top'>,\n      default: 'bottom',\n      validator: (value: string) => ['bottom', 'top'].includes(value),\n    },\n  },\n  setup (props) {\n    const targetScrollValue = ref(0)\n\n    const computedStyle = computed(() => ({\n      [props.verticalPosition]: props.verticalOffset,\n      [props.horizontalPosition]: props.horizontalOffset,\n    }))\n\n    let targetElement: Element | Window\n\n    const getTargetElement = () => {\n      if (!props.target) { return window as Window }\n      if (typeof props.target === 'string') { return document.querySelector(props.target) as Element }\n      return props.target as Element\n    }\n\n    const scrolled = ref(false)\n    const interval = ref(0)\n    const scrollToTop = () => {\n      if (scrolled.value) { return }\n\n      scrolled.value = true\n\n      if (targetElement instanceof Window) {\n        window.scrollTo({\n          top: 0,\n          behavior: 'smooth',\n        })\n\n        return\n      }\n\n      interval.value = window.setInterval(() => {\n        if (targetElement instanceof Element) {\n          if (targetElement.scrollTop === 0) {\n            clearInterval(interval.value)\n            scrolled.value = false\n          } else {\n            const next = Math.floor(targetElement.scrollTop - props.speed)\n            targetElement.scrollTo(0, next)\n          }\n        }\n      }, 15)\n    }\n\n    const handleScroll = () => {\n      targetScrollValue.value = targetElement instanceof Window\n        ? targetElement.scrollY\n        : targetElement.scrollTop\n    }\n\n    const visible = computed(() => targetScrollValue.value > props.visibilityHeight)\n\n    onMounted(() => {\n      targetElement = getTargetElement()\n      targetElement.addEventListener('scroll', handleScroll, true)\n    })\n    onBeforeUnmount(() => targetElement?.removeEventListener('scroll', handleScroll))\n\n    return {\n      computedStyle,\n      visible,\n      scrollToTop,\n    }\n  },\n})\n</script>\n\n<style lang=\"scss\">\n@import \"variables\";\n\n.va-backtop {\n  position: var(--va-backtop-position);\n  top: var(--va-backtop-top);\n  left: var(--va-backtop-left);\n  right: var(--va-backtop-right);\n  bottom: var(--va-backtop-bottom);\n  cursor: var(--va-backtop-cursor);\n  z-index: var(--va-backtop-z-index);\n  font-family: var(--va-font-family);\n}\n</style>\n","<template>\n  <div\n    v-if=\"visible\"\n    class=\"va-backtop\"\n    role=\"button\"\n    aria-label=\"back to top\"\n    :style=\"computedStyle\"\n    @click=\"scrollToTop\"\n    @keydown.enter.stop=\"scrollToTop\"\n  >\n    <slot>\n      <va-button\n        aria-hidden=\"true\"\n        icon=\"expand_less\"\n        :color=\"color\"\n      />\n    </slot>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, PropType, ref, computed, onMounted, onBeforeUnmount } from 'vue'\n\nimport { VaButton } from '../va-button'\n\nexport default defineComponent({\n  name: 'VaBacktop',\n  components: { VaButton },\n  props: {\n    target: {\n      type: [Object, String] as PropType<Element | string | undefined>,\n      default: undefined,\n    },\n    visibilityHeight: { type: Number, default: 300 },\n    speed: { type: Number, default: 50 },\n    verticalOffset: { type: String, default: '1rem' },\n    horizontalOffset: { type: String, default: '1rem' },\n    color: { type: String, default: '' },\n    horizontalPosition: {\n      type: String as PropType<'right' | 'left'>,\n      default: 'right',\n      validator: (value: string) => ['right', 'left'].includes(value),\n    },\n    verticalPosition: {\n      type: String as PropType<'bottom' | 'top'>,\n      default: 'bottom',\n      validator: (value: string) => ['bottom', 'top'].includes(value),\n    },\n  },\n  setup (props) {\n    const targetScrollValue = ref(0)\n\n    const computedStyle = computed(() => ({\n      [props.verticalPosition]: props.verticalOffset,\n      [props.horizontalPosition]: props.horizontalOffset,\n    }))\n\n    let targetElement: Element | Window\n\n    const getTargetElement = () => {\n      if (!props.target) { return window as Window }\n      if (typeof props.target === 'string') { return document.querySelector(props.target) as Element }\n      return props.target as Element\n    }\n\n    const scrolled = ref(false)\n    const interval = ref(0)\n    const scrollToTop = () => {\n      if (scrolled.value) { return }\n\n      scrolled.value = true\n\n      if (targetElement instanceof Window) {\n        window.scrollTo({\n          top: 0,\n          behavior: 'smooth',\n        })\n\n        return\n      }\n\n      interval.value = window.setInterval(() => {\n        if (targetElement instanceof Element) {\n          if (targetElement.scrollTop === 0) {\n            clearInterval(interval.value)\n            scrolled.value = false\n          } else {\n            const next = Math.floor(targetElement.scrollTop - props.speed)\n            targetElement.scrollTo(0, next)\n          }\n        }\n      }, 15)\n    }\n\n    const handleScroll = () => {\n      targetScrollValue.value = targetElement instanceof Window\n        ? targetElement.scrollY\n        : targetElement.scrollTop\n    }\n\n    const visible = computed(() => targetScrollValue.value > props.visibilityHeight)\n\n    onMounted(() => {\n      targetElement = getTargetElement()\n      targetElement.addEventListener('scroll', handleScroll, true)\n    })\n    onBeforeUnmount(() => targetElement?.removeEventListener('scroll', handleScroll))\n\n    return {\n      computedStyle,\n      visible,\n      scrollToTop,\n    }\n  },\n})\n</script>\n\n<style lang=\"scss\">\n@import \"variables\";\n\n.va-backtop {\n  position: var(--va-backtop-position);\n  top: var(--va-backtop-top);\n  left: var(--va-backtop-left);\n  right: var(--va-backtop-right);\n  bottom: var(--va-backtop-bottom);\n  cursor: var(--va-backtop-cursor);\n  z-index: var(--va-backtop-z-index);\n  font-family: var(--va-font-family);\n}\n</style>\n","import withConfigTransport from '../../services/config-transport/withConfigTransport'\nimport _VaBacktop from './VaBacktop.vue'\n\nexport const VaBacktop = withConfigTransport(_VaBacktop)\n"],"names":["script","defineComponent","name","components","VaButton","props","target","type","Object","String","default","undefined","visibilityHeight","Number","speed","verticalOffset","horizontalOffset","color","horizontalPosition","validator","value","includes","verticalPosition","setup","targetScrollValue","ref","computedStyle","computed","targetElement","scrolled","interval","handleScroll","Window","scrollY","scrollTop","visible","onMounted","document","querySelector","window","addEventListener","onBeforeUnmount","removeEventListener","scrollToTop","scrollTo","top","behavior","setInterval","Element","clearInterval","next","Math","floor","_ctx","class","role","style","icon","VaBacktop","withConfigTransport","_VaBacktop"],"mappings":"0vBAyBA,IAAAA,EAAeC,EAAgB,CAC7BC,KAAM,YACNC,WAAY,CAAEC,SAAAA,GACdC,MAAO,CACLC,OAAQ,CACNC,KAAM,CAACC,OAAQC,QACfC,aAASC,GAEXC,iBAAkB,CAAEL,KAAMM,OAAQH,QAAS,KAC3CI,MAAO,CAAEP,KAAMM,OAAQH,QAAS,IAChCK,eAAgB,CAAER,KAAME,OAAQC,QAAS,QACzCM,iBAAkB,CAAET,KAAME,OAAQC,QAAS,QAC3CO,MAAO,CAAEV,KAAME,OAAQC,QAAS,IAChCQ,mBAAoB,CAClBX,KAAME,OACNC,QAAS,QACTS,UAAYC,GAAkB,CAAC,QAAS,QAAQC,SAASD,IAE3DE,iBAAkB,CAChBf,KAAME,OACNC,QAAS,SACTS,UAAYC,GAAkB,CAAC,SAAU,OAAOC,SAASD,KAG7DG,MAAOlB,GACL,MAAMmB,EAAoBC,EAAI,GAExBC,EAAgBC,GAAS,KAAO,CACpC,CAACtB,EAAMiB,kBAAmBjB,EAAMU,eAChC,CAACV,EAAMa,oBAAqBb,EAAMW,qBAGpC,IAAIY,EAEJ,MAMMC,EAAWJ,GAAI,GACfK,EAAWL,EAAI,GA4BfM,aAAe,KACnBP,EAAkBJ,MAAQQ,aAAyBI,OAC/CJ,EAAcK,QACdL,EAAcM,WAGdC,EAAUR,GAAS,IAAMH,EAAkBJ,MAAQf,EAAMO,mBAQ/D,OANAwB,GAAU,KACRR,EA3CKvB,EAAMC,OACiB,iBAAjBD,EAAMC,OAA8B+B,SAASC,cAAcjC,EAAMC,QACrED,EAAMC,OAFeiC,OA4C5BX,EAAcY,iBAAiB,SAAUT,cAAc,MAEzDU,GAAgB,IAAMb,MAAAA,OAAa,EAAbA,EAAec,oBAAoB,SAAUX,gBAE5D,CACLL,cAAAA,EACAS,QAAAA,EACAQ,YA5CkB,KACdd,EAAST,QAEbS,EAAST,OAAQ,EAEbQ,aAAyBI,OAC3BO,OAAOK,SAAS,CACdC,IAAK,EACLC,SAAU,WAMdhB,EAASV,MAAQmB,OAAOQ,aAAY,KAClC,GAAInB,aAAyBoB,QAC3B,GAAgC,IAA5BpB,EAAcM,UAChBe,cAAcnB,EAASV,OACvBS,EAAST,OAAQ,MACZ,CACL,MAAM8B,EAAOC,KAAKC,MAAMxB,EAAcM,UAAY7B,EAAMS,OACxDc,EAAcgB,SAAS,EAAGM,MAG7B,iFCzFCG,EAAOlB,uBACbmB,MAAM,aACNC,KAAK,SACL,aAAW,cACVC,MAAOH,EAAa3B,4DAMjB,cAAY,OACZ+B,KAAK,cACJxC,MAAOoC,EAAKpC,iHCXRyC,EAAYC,EAAoBC"}