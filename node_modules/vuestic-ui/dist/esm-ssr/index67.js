import{watch as e,inject as r,onMounted as s,onBeforeUnmount as o,defineComponent as t,computed as a,mergeProps as l}from"vue";import{f as u}from"./usePopover.js";import{t as i,i as n,v as m,w as d}from"./global-config.js";import{u as p}from"./useSyncProp.js";import{a as c}from"./useFocus.js";import{F as g}from"./consts.js";import{w as f}from"./withConfigTransport.js";import"./global-utils.js";import{u as v}from"./useColors.js";import{ssrRenderAttrs as y,ssrRenderList as V,ssrInterpolate as S}from"@vue/server-renderer";var j=i,M=n,h=m;var x=function isString(e){return"string"==typeof e||!M(e)&&h(e)&&"[object String]"==j(e)};const b={modelValue:{required:!1},error:{type:Boolean,default:void 0},errorMessages:{type:[Array,String],default:void 0},errorCount:{type:[String,Number],default:1},rules:{type:Array,default:()=>[]},success:{type:Boolean,default:!1},messages:{type:[Array,String],default:()=>[]},immediateValidation:{type:Boolean,default:!1}},A=["update:error","update:errorMessages"],useValidation=(t,a,l,i)=>{const{isFocused:n,onFocus:m,onBlur:f}=c(),[v]=p("error",t,a,!1),[y]=p("errorMessages",t,a,[]),resetValidation=()=>{v.value=!1,y.value=[]},validate=()=>{if(!t.rules||!t.rules.length)return!0;let e=!1,r=[];return((e=[],r=null)=>(x(e)&&(e=[e]),e.map((e=>d(e)?e(r):e))))(u(t.rules),t.modelValue).forEach((s=>{x(s)?(r=[...r,s],e=!0):!1===s&&(e=!0)})),y.value=r,v.value=e,!e};e(n,(e=>!e&&validate())),e((()=>t.modelValue),(()=>validate()),{immediate:t.immediateValidation});const V={resetValidation:resetValidation,focus:i,validate:validate,reset:l,hasError:()=>v.value},S=r(g,void 0);return s((()=>{null==S||S.onChildMounted(V)})),o((()=>{null==S||S.onChildUnmounted(V)})),{computedError:v,computedErrorMessages:y,listeners:{onFocus:m,onBlur:f},validate:validate,resetValidation:resetValidation}};var C=t({name:"VaMessageList",props:{modelValue:{type:[String,Array],default:""},limit:{type:Number,default:1},color:{type:String}},setup(e){const{getColor:r}=v();return{messages:a((()=>e.modelValue?Array.isArray(e.modelValue)?e.modelValue.slice(0,e.limit):[e.modelValue]:[])),computedStyle:a((()=>e.color?{color:r(e.color)}:{}))}}});C.ssrRender=function ssrRender(e,r,s,o,t,a,u,i){e.messages.length?(r(`<div${y(l({class:"va-message-list",style:e.computedStyle},o))}>\x3c!--[--\x3e`),V(e.messages,((e,s)=>{r(`<div class="va-message-list__message">${S(e)}</div>`)})),r("\x3c!--]--\x3e</div>")):r("\x3c!----\x3e")},C.__file="src/components/va-input/components/VaMessageList/VaMessageList.vue";const B=f(C);export{B as V,A as a,useValidation as b,b as u};
//# sourceMappingURL=index67.js.map
