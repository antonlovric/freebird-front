import{defineComponent as e,computed as t,createVNode as n,resolveDynamicComponent as o,mergeProps as r,withCtx as a,renderSlot as i,openBlock as s,createBlock as l,Fragment as c,createTextVNode as u,toDisplayString as f,createCommentVNode as m}from"vue";import{_ as p,a as g,b as v,c as d,d as h}from"./usePopover.js";import{n as $,o as b,p as y,q as C,r as x,u as S}from"./global-config.js";import"./global-utils.js";import{u as w}from"./useColors.js";import{u as R,a as j}from"./useSize.js";import{ssrRenderVNode as E,ssrRenderSlot as z,ssrInterpolate as _}from"@vue/server-renderer";var k=function baseSlice$1(e,t,n){var o=-1,r=e.length;t<0&&(t=-t>r?0:r+t),(n=n>r?r:n)<0&&(n+=r),r=t>n?0:n-t>>>0,t>>>=0;for(var a=Array(r);++o<r;)a[o]=e[o+t];return a},A=p,I=k;var F=v,P=function last$1(e){var t=null==e?0:e.length;return t?e[t-1]:void 0},B=function parent$1(e,t){return t.length<2?e:A(e,I(t,0,-1))},O=g;var T=$;var U=d,V=C,q=function baseUnset$1(e,t){return t=F(t,e),null==(e=B(e,t))||delete e[O(P(t))]},G=v,N=b,D=function customOmitClone$1(e){return T(e)?void 0:e},H=y,J=h((function(e,t){var n={};if(null==e)return n;var o=!1;t=U(t,(function(t){return t=G(t,e),o||(o=t.length>1),t})),N(e,H(e),n),o&&(n=V(n,7,D));for(var r=t.length;r--;)q(n,t[r]);return n}));const regexGroupsValues=(e,t)=>{if("string"!=typeof t&&t.global)return[...e.matchAll(t)].map((e=>e.slice(1)));const n=e.match(t)||[];return n?n.length>1?n.slice(1):n:[]},K=/{[^}]*}/g,dynamicSegmentStringToRegex=e=>e.replace(K,"(.*)"),dynamicSegments=(e,t)=>{const n=(e=>(e.match(K)||[]).map((e=>e.replace(/{|}/g,""))))(t),o=((e,t)=>regexGroupsValues(e,dynamicSegmentStringToRegex(t)))(e,t);return n.reduce(((e,t,n)=>({...e,[t]:o[n]})),{})},isIconConfigurationString=e=>"string"==typeof e.name,isIconConfigurationRegex=e=>e.name instanceof RegExp,isMatchConfiguration=(e,t)=>{return isIconConfigurationString(t)?((e,t)=>{const n=dynamicSegmentStringToRegex(t);return((e,t)=>(e.match(t)||[])[0]===e)(e,new RegExp(n))})(e,t.name):!!isIconConfigurationRegex(t)&&(n=e,t.name.test(n));var n},resolveIconConfiguration=(e,t)=>{if(isIconConfigurationString(t))return((e,t)=>{const n=dynamicSegments(e,t.name);return t.resolve&&t.resolve(n)})(e,t);if(isIconConfigurationRegex(t))return((e,t)=>{if(t.name.global)throw new Error(`Bad icon config with name ${t.name}. Please, don't use global regex as name.`);const n=regexGroupsValues(e,t.name);return t.resolveFromRegex&&t.resolveFromRegex(...n)})(e,t);throw Error("Unknown icon config")},findIconConfiguration=(e,t,n=[])=>{if(!e)return;const o=((e,t,n=[])=>{const o=t.find((t=>!n.includes(t.name.toString())&&isMatchConfiguration(e,t)));if(!o)throw new Error(`Can not find icon config from ${e}. Please provide default config.`);return o})(e,t,n),r=x(resolveIconConfiguration(e,o),o);return n=[...n,o.name.toString()],x(findIconConfiguration(r.to,t,n),r)},useIcons=e=>{const{getGlobalConfig:t}=S();return{getIcon:e=>((e,t)=>{const n=findIconConfiguration(e,t);return void 0===n?{}:(e=>{const t=e;return["name","to","resolve","resolveFromRegex"].forEach((e=>{delete t[e]})),t})(n)})(e,t().icons||[])}};var L=e({name:"VaIcon",props:{...R,name:{type:String,default:""},tag:{type:String},component:{type:Object},color:{type:String},rotation:{type:[String,Number]},spin:{type:[String,Boolean]},flip:{type:String,default:"off",validator:e=>["off","horizontal","vertical","both"].includes(e)}},setup(e,{attrs:n}){const{getColor:o}=w(),{sizeComputed:r}=j(e),{getIcon:a}=useIcons(),i=t((()=>a(e.name))),s=t((()=>e.component||e.tag||i.value.component||i.value.tag||"i")),l=t((()=>({...i.value.attrs,...J(n,["class"])}))),getSpinClass=e=>{if(void 0!==e&&!1!==e)return"counter-clockwise"===e?"va-icon--spin-reverse":"va-icon--spin"},c=t((()=>{var t;return[i.value.class,getSpinClass(null!==(t=e.spin)&&void 0!==t?t:i.value.spin)]})),u=t((()=>{const t=e.rotation?`rotate(${e.rotation}deg)`:"",n="vertical"===e.flip||"both"===e.flip?-1:1,o="horizontal"===e.flip||"both"===e.flip?-1:1;return`${"off"===e.flip?"":`scale(${n}, ${o})`} ${t}`.trim()})),f=t((()=>({transform:u.value,cursor:n.onClick?"pointer":null,color:e.color?o(e.color,void 0,!0):i.value.color,fontSize:r.value})));return{iconConfig:i,computedTag:s,computedAttrs:l,computedClass:c,computedStyle:f}}});L.ssrRender=function ssrRender(e,t,p,g,v,d,h,$){E(t,n(o(e.computedTag),r({class:["va-icon",e.computedClass],"aria-hidden":"true",style:e.computedStyle},e.computedAttrs,{notranslate:""},g),{default:a(((t,n,o,r)=>{if(!n)return[i(e.$slots,"default",{},(()=>[e.iconConfig.content?(s(),l(c,{key:0},[u(f(e.iconConfig.content),1)],2112)):m("v-if",!0)]))];z(e.$slots,"default",{},(()=>{e.iconConfig.content?n(`\x3c!--[--\x3e${_(e.iconConfig.content)}\x3c!--]--\x3e`):n("\x3c!----\x3e")}),n,o,r)})),_:3}),p)},L.__file="src/components/va-icon/VaIcon.vue";export{k as _,J as o,L as s,useIcons as u};
//# sourceMappingURL=VaIcon.js.map
