import{w as e}from"./withConfigTransport.js";import{defineComponent as o,h as l,Transition as a,shallowRef as t,toRef as s,computed as i,watch as n,resolveComponent as r,mergeProps as d,withCtx as c,createTextVNode as m,toDisplayString as u,openBlock as p,createBlock as v,createCommentVNode as f,createVNode as y,withKeys as $,renderSlot as x,Fragment as g}from"vue";import"./global-config.js";import"./usePopover.js";import"./global-utils.js";import{u as _}from"./useColors.js";import{u as h,a as k,b as C}from"./useStateful.js";import{u as b}from"./useTextColor.js";import{VaButton as T}from"./index12.js";import{VaIcon as S}from"./index31.js";import{ssrRenderAttrs as B,ssrRenderSlot as w,ssrRenderTeleport as D,ssrRenderComponent as E,ssrRenderStyle as z,ssrRenderClass as A,ssrInterpolate as O}from"@vue/server-renderer";const j=o({name:"ModalElement",inheritAttrs:!1,props:{isTransition:{type:Boolean,default:!0}},setup:(e,{slots:o,attrs:t})=>()=>{var s;return e.isTransition?l(a,{...t},o):null===(s=o.default)||void 0===s?void 0:s.call(o,t)}});var L=o({name:"VaModal",inheritAttrs:!1,components:{VaButton:T,VaIcon:S,ModalElement:j},emits:[...h,"cancel","ok","before-open","open","before-close","close","click-outside"],props:{...k,modelValue:{type:Boolean,default:!1},attachElement:{type:String,default:"body"},disableAttachment:{type:Boolean,default:!1},title:{type:String,default:""},message:{type:String,default:""},okText:{type:String,default:"OK"},cancelText:{type:String,default:"Cancel"},hideDefaultActions:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},mobileFullscreen:{type:Boolean,default:!0},noDismiss:{type:Boolean,default:!1},noOutsideDismiss:{type:Boolean,default:!1},noEscDismiss:{type:Boolean,default:!1},maxWidth:{type:String,default:""},maxHeight:{type:String,default:""},anchorClass:{type:String},size:{type:String,default:"medium",validator:e=>["medium","small","large"].includes(e)},fixedLayout:{type:Boolean,default:!1},withoutTransitions:{type:Boolean,default:!1},overlay:{type:Boolean,default:!0},overlayOpacity:{type:[Number,String],default:.6},blur:{type:Boolean,default:!1},zIndex:{type:[Number,String]},backgroundColor:{type:String,default:"white"},noPadding:{type:Boolean,default:!1}},setup(e,{emit:o}){const l=t(),{getColor:a}=_(),{textColorComputed:r}=b(s(e,"backgroundColor")),{valueComputed:d}=C(e,o),c=i((()=>({"va-modal--fullscreen":e.fullscreen,"va-modal--mobile-fullscreen":e.mobileFullscreen,"va-modal--fixed-layout":e.fixedLayout,"va-modal--no-padding":e.noPadding,[`va-modal--size-${e.size}`]:"medium"!==e.size}))),m=i((()=>({"z-index":e.zIndex}))),u=i((()=>({maxWidth:e.maxWidth,maxHeight:e.maxHeight,color:r.value,background:a(e.backgroundColor)}))),p=i((()=>{const o=!!document.querySelectorAll(".va-modal__overlay").length;if(e.overlay&&!o)return{"background-color":`rgba(0, 0, 0, ${e.overlayOpacity})`,"z-index":e.zIndex&&Number(e.zIndex)-1}})),hide=()=>{d.value=!1},cancel=()=>{hide(),o("cancel")},listenKeyUp=o=>{o.modalsCounter=o.modalsCounter?o.modalsCounter+1:1;const l=o.modalsCounter;setTimeout((()=>{"Escape"!==o.code||e.noEscDismiss||e.noDismiss||o.modalsCounter!==l||cancel()}))};n(d,(o=>{o?window.addEventListener("keyup",listenKeyUp):window.removeEventListener("keyup",listenKeyUp),e.blur&&(o?document.body.classList.add("va-modal-overlay-background--blurred"):document.body.classList.remove("va-modal-overlay-background--blurred"))}),{immediate:!0});const v={show:()=>{d.value=!0},hide:hide,toggle:()=>{d.value=!d.value},cancel:cancel,ok:()=>{hide(),o("ok")},onOutsideClick:()=>{e.noOutsideDismiss||e.noDismiss||(o("click-outside"),cancel())},onBeforeEnterTransition:e=>o("before-open",e),onAfterEnterTransition:e=>o("open",e),onBeforeLeaveTransition:e=>o("before-close",e),onAfterLeaveTransition:e=>o("close",e),listenKeyUp:listenKeyUp};return{getColor:a,rootElement:l,valueComputed:d,computedClass:c,computedDialogStyle:u,computedModalContainerStyle:m,computedOverlayStyles:p,...v}}});L.ssrRender=function ssrRender(e,o,l,a,t,s,i,n){const _=r("modal-element"),h=r("va-icon"),k=r("va-button");o(`<div${B(d({ref:"rootElement",class:["va-modal-entry",e.$props.anchorClass],role:"dialog","aria-modal":"true","aria-labelledby":e.title},a))}>`),e.$slots.anchor?(o('<div class="va-modal__anchor">'),w(e.$slots,"anchor",{show:e.show,hide:e.hide,toggle:e.toggle},null,o,l),o("</div>")):o("\x3c!----\x3e"),D(o,(o=>{o(E(_,d({name:"va-modal",isTransition:!e.$props.withoutTransitions,appear:"",duration:300},e.$attrs),{default:c(((o,l,a,t)=>{if(!l)return[e.valueComputed?(p(),v("div",{key:0,class:"va-modal"},[e.$props.overlay?(p(),v("div",{key:0,class:"va-modal__overlay",style:e.computedOverlayStyles,onClick:e.onOutsideClick},null,12,["onClick"])):f("v-if",!0),y("div",{class:"va-modal__container",style:e.computedModalContainerStyle},[y("div",{class:["va-modal__dialog",e.computedClass],style:e.computedDialogStyle},[e.$props.fullscreen?(p(),v(h,{key:0,name:"close",class:"va-modal__close",role:"button","aria-label":"close","aria-hidden":"false",tabindex:"0",onClick:e.cancel,onKeydown:[$(e.cancel,["space"]),$(e.cancel,["enter"])]},null,8,["onClick","onKeydown"])):f("v-if",!0),y("div",{class:"va-modal__inner",style:{maxWidth:e.$props.maxWidth,maxHeight:e.$props.maxHeight}},[e.$slots.content?(p(),v("div",{key:0},[x(e.$slots,"content",{cancel:e.cancel,ok:e.ok})])):f("v-if",!0),e.$slots.content?f("v-if",!0):(p(),v(g,{key:1},[e.title?(p(),v("div",{key:0,class:"va-modal__title",style:{color:e.getColor("primary")}},u(e.$props.title),5)):f("v-if",!0),e.$slots.header?(p(),v("div",{key:1,class:"va-modal__header"},[x(e.$slots,"header")])):f("v-if",!0),e.$props.message?(p(),v("div",{key:2,class:"va-modal__message"},u(e.$props.message),1)):f("v-if",!0),e.$slots.default?(p(),v("div",{key:3,class:"va-modal__message"},[x(e.$slots,"default")])):f("v-if",!0),!e.$props.cancelText&&!e.$props.okText||e.$props.hideDefaultActions?f("v-if",!0):(p(),v("div",{key:4,class:"va-modal__footer"},[e.$props.cancelText?(p(),v(k,{key:0,color:"gray",class:"mr-2",flat:"",onClick:e.cancel},{default:c((()=>[m(u(e.$props.cancelText),1)])),_:1},8,["onClick"])):f("v-if",!0),y(k,{onClick:e.ok},{default:c((()=>[m(u(e.$props.okText),1)])),_:1},8,["onClick"])])),e.$slots.footer?(p(),v("div",{key:5,class:"va-modal__footer"},[x(e.$slots,"footer")])):f("v-if",!0)],64))],4)],6)],4)])):f("v-if",!0)];e.valueComputed?(l(`<div class="va-modal"${t}>`),e.$props.overlay?l(`<div class="va-modal__overlay" style="${z(e.computedOverlayStyles)}"${t}></div>`):l("\x3c!----\x3e"),l(`<div class="va-modal__container" style="${z(e.computedModalContainerStyle)}"${t}><div class="${A([e.computedClass,"va-modal__dialog"])}" style="${z(e.computedDialogStyle)}"${t}>`),e.$props.fullscreen?l(E(h,{name:"close",class:"va-modal__close",role:"button","aria-label":"close","aria-hidden":"false",tabindex:"0"},null,a,t)):l("\x3c!----\x3e"),l(`<div class="va-modal__inner" style="${z({maxWidth:e.$props.maxWidth,maxHeight:e.$props.maxHeight})}"${t}>`),e.$slots.content?(l(`<div${t}>`),w(e.$slots,"content",{cancel:e.cancel,ok:e.ok},null,l,a,t),l("</div>")):l("\x3c!----\x3e"),e.$slots.content?l("\x3c!----\x3e"):(l("\x3c!--[--\x3e"),e.title?l(`<div class="va-modal__title" style="${z({color:e.getColor("primary")})}"${t}>${O(e.$props.title)}</div>`):l("\x3c!----\x3e"),e.$slots.header?(l(`<div class="va-modal__header"${t}>`),w(e.$slots,"header",{},null,l,a,t),l("</div>")):l("\x3c!----\x3e"),e.$props.message?l(`<div class="va-modal__message"${t}>${O(e.$props.message)}</div>`):l("\x3c!----\x3e"),e.$slots.default?(l(`<div class="va-modal__message"${t}>`),w(e.$slots,"default",{},null,l,a,t),l("</div>")):l("\x3c!----\x3e"),!e.$props.cancelText&&!e.$props.okText||e.$props.hideDefaultActions?l("\x3c!----\x3e"):(l(`<div class="va-modal__footer"${t}>`),e.$props.cancelText?l(E(k,{color:"gray",class:"mr-2",flat:""},{default:c(((o,l,a,t)=>{if(!l)return[m(u(e.$props.cancelText),1)];l(`${O(e.$props.cancelText)}`)})),_:1},a,t)):l("\x3c!----\x3e"),l(E(k,null,{default:c(((o,l,a,t)=>{if(!l)return[m(u(e.$props.okText),1)];l(`${O(e.$props.okText)}`)})),_:1},a,t)),l("</div>")),e.$slots.footer?(l(`<div class="va-modal__footer"${t}>`),w(e.$slots,"footer",{},null,l,a,t),l("</div>")):l("\x3c!----\x3e"),l("\x3c!--]--\x3e")),l("</div></div></div></div>")):l("\x3c!----\x3e")})),_:3},l))}),e.attachElement,e.$props.disableAttachment,l),o("</div>")},L.__file="src/components/va-modal/VaModal.vue";const H=e(L);export{H as V};
//# sourceMappingURL=VaModal.js.map
