import{w as e}from"./withConfigTransport.js";import{ref as o,computed as t,getCurrentInstance as a,defineComponent as r,shallowRef as l,watch as u,resolveComponent as n,mergeProps as s,createSlots as i,withCtx as m,createVNode as p}from"vue";import{e as d,f as v}from"./child-props.js";import"./global-config.js";import"./usePopover.js";import"./global-utils.js";import"colortranslator";import{u as c,a as b}from"./useForm.js";import{c as f}from"./clamp.js";import{u as g}from"./useHover.js";import{a as V,b as C}from"./useStateful.js";import{u as y}from"./useColors.js";import{u as I}from"./useSyncProp.js";import{VaIcon as x}from"./index31.js";import{ssrRenderAttrs as L,ssrRenderSlot as h,ssrRenderComponent as $,ssrInterpolate as R,ssrRenderList as j,ssrRenderStyle as N}from"@vue/server-renderer";import{u as F,a as _}from"./useSize.js";import"./VaConfig.js";import"./global-properties.js";import"./isSymbol.js";import"./ssr-utils.js";import"./useBem.js";import"./_createCompounder.js";import"./toNumber.js";import"./VaIcon.js";var B;!function(e){e[e.EMPTY=0]="EMPTY",e[e.HALF=.5]="HALF",e[e.FULL=1]="FULL"}(B||(B={}));const M={...V,modelValue:{type:Number,default:0},clearable:{type:Boolean,default:!1},hover:{type:Boolean,default:!1}},useRating=e=>{const{emit:r}=(()=>{const e=a();if(!e)throw new Error("useRating hooks must be used on top of setup function");return{props:e.props,emit:e.emit}})(),{isHovered:l,onMouseEnter:u,onMouseLeave:n}=g(),{valueComputed:s}=C(e,r),i=o(0),m=t((()=>!e.disabled&&!e.readonly&&e.hover&&l.value?i.value:s.value));return{visibleValue:m,modelValue:s,hoveredValue:i,isHovered:l,onMouseEnter:u,onMouseLeave:n,onItemValueUpdate:(o,t)=>{const a=o+t;e.clearable&&s.value===a?s.value=0:s.value=a},onItemHoveredValueUpdate:(o,t)=>{e.hover&&(i.value=o+t)},getItemValue:e=>{const o=m.value-e;return f(o,B.EMPTY,B.FULL)}}},P={unselectedColor:{type:String},color:{type:String,default:"primary"},modelValue:{type:Number}},useVaRatingColors=e=>{const{getColor:o,getFocusColor:a,getTextColor:r}=y(),l=t((()=>o(e.color))),u=t((()=>e.unselectedColor?o(e.unselectedColor):a(o(e.color)))),n=t((()=>e.modelValue===B.HALF?`linear-gradient(90deg, ${l.value} 50%, ${u.value} 50%`:e.modelValue===B.EMPTY?u.value:l.value)),s=t((()=>e.modelValue===B.FULL?r(l.value):r(u.value)));return{computedColor:l,backgroundComputed:n,textColorComputed:s}};var E=r({name:"VaRatingItem",components:{VaIcon:x},props:{modelValue:{type:Number,default:0},icon:{type:String,default:"star"},halfIcon:{type:String,default:"star_half"},emptyIcon:{type:String,default:"star_outline"},halves:{type:Boolean,default:!1},hover:{type:Boolean,default:!1},tabindex:{type:Number,default:0},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},size:{type:[String,Number],default:"medium"},unselectedColor:{type:String},color:{type:String,default:"primary"}},emits:["update:modelValue","click","hover"],setup(e,{emit:a}){const r=l(),[n]=I("modelValue",e,a,B.EMPTY),s=o(null),i=t((()=>!e.hover||e.disabled||e.readonly?n.value:s.value||n.value)),{getColor:m}=y(),p=t((()=>m(e.unselectedColor&&i.value===B.EMPTY?e.unselectedColor:e.color)));return u(s,(()=>a("hover",s.value||B.EMPTY))),{computedColor:p,rootEl:r,onEnter:()=>{n.value=1},onClick:()=>{n.value=s.value||B.FULL,a("click",s.value||B.FULL)},onMouseMove:o=>{if(!r.value)return;const{offsetX:t}=o,a=r.value.clientWidth;e.halves?s.value=t/a<=B.HALF?B.HALF:B.FULL:s.value=B.FULL},onMouseLeave:()=>{s.value=null},visibleValue:i,computedIconName:t((()=>e.halves&&i.value===B.HALF?e.halfIcon:i.value===B.EMPTY?e.emptyIcon:e.icon)),tabIndexComputed:t((()=>e.disabled?-1:e.tabindex))}}});E.ssrRender=function ssrRender$2(e,o,t,a,r,l,u,i){const m=n("va-icon");o(`<div${L(s({ref:"rootEl",class:"va-rating-item",role:"button",tabindex:e.tabIndexComputed},a))}>`),h(e.$slots,"default",{props:{value:e.visibleValue,onClick:e.onClick}},(()=>{o($(m,{class:"va-rating-item__wrapper",tabindex:"-1",tag:"button",name:e.computedIconName,size:e.$props.size,color:e.computedColor},null,t))}),o,t),o("</div>")},E.__file="src/components/va-rating/components/VaRatingItem/VaRatingItem.vue";var S=r({name:"VaRatingItemNumberButton",props:{...P,...F,itemNumber:{type:Number,required:!0},modelValue:{type:Number,required:!0}},setup:e=>({...useVaRatingColors(e),..._(e,"VaRating")})});S.ssrRender=function ssrRender$1(e,o,t,a,r,l,u,n){o(`<button${L(s({class:"va-rating__number-item",tabindex:"-1","aria-hidden":"true",style:{background:e.backgroundComputed,color:e.textColorComputed,width:e.sizeComputed,height:e.sizeComputed,fontSize:e.fontSizeComputed,borderRadius:.125*parseInt(e.fontSizeComputed)+"rem"}},a))}>${R(e.itemNumber)}</button>`)},S.__file="src/components/va-rating/components/VaRatingItemNumberButton.vue";const k=d(E),U=d(S,["modelValue","itemNumber"]);var H=r({name:"VaRating",props:{...M,...P,...c,...k,...U,numbers:{type:Boolean,default:!1},halves:{type:Boolean,default:!1},max:{type:Number,default:5},texts:{type:Array,default:()=>[]}},emits:["update:modelValue"],components:{VaRatingItem:E,VaRatingItemNumberButton:S},setup(e){const{computedClasses:o}=b("va-rating",e),a=useRating(e),r=t((()=>!e.disabled&&!e.readonly));return{...useVaRatingColors(e),...a,rootClass:o,VaRatingItemProps:v(e,k),VaRatingItemNumberButtonProps:v(e,U),isInteractionsEnabled:r,tabIndexComputed:t((()=>r.value?0:void 0)),onArrowKeyPress:o=>{const t=e.halves?B.HALF:B.FULL;a.onItemValueUpdate(a.visibleValue.value,t*o)}}}});H.ssrRender=function ssrRender(e,o,t,a,r,l,u,d){const v=n("va-rating-item"),c=n("VaRatingItemNumberButton");o(`<div${L(s({class:["va-rating",e.rootClass],"aria-label":`current rating ${e.$props.modelValue} of ${e.$props.max}`},a))}><div class="va-rating__item-wrapper">\x3c!--[--\x3e`),j(e.$props.max,(a=>{o($(v,s({key:a},e.VaRatingItemProps,{"aria-label":`vote rating ${a} of ${e.$props.max}`,"model-value":e.getItemValue(a-1),tabindex:e.tabIndexComputed,disabled:e.$props.disabled,readonly:e.$props.readonly}),i({_:2},[e.$props.numbers?{name:"default",fn:m((({props:o},t,r,l)=>{if(!t)return[p(c,s(e.VaRatingItemNumberButtonProps,{"model-value":o.value,"item-number":a,onClick:o.onClick}),null,16,["model-value","item-number","onClick"])];t($(c,s(e.VaRatingItemNumberButtonProps,{"model-value":o.value,"item-number":a}),null,r,l))}))}:void 0]),t))})),o("\x3c!--]--\x3e</div>"),e.$props.texts&&e.$props.texts.length===e.$props.max?o(`<span class="va-rating__text-wrapper" style="${N({color:e.computedColor})}">${R(e.$props.texts[Math.round(e.visibleValue)-1])}</span>`):o("\x3c!----\x3e"),o("</div>")},H.__file="src/components/va-rating/VaRating.vue";const T=e(E),w=e(H);export{w as VaRating,T as VaRatingItem};
//# sourceMappingURL=index45.js.map
