import{w as e}from"./withConfigTransport.js";import{ref as o,defineComponent as n,shallowRef as r,computed as t,nextTick as l,resolveComponent as s,mergeProps as a,withCtx as p,toHandlers as i,createSlots as d,renderSlot as u,openBlock as c,createBlock as m,withModifiers as w,withKeys as f,createCommentVNode as g,renderList as b,createVNode as v}from"vue";import{s as y,o as D}from"./VaIcon.js";import{e as h,f as I}from"./child-props.js";import"./global-config.js";import"./usePopover.js";import"./global-utils.js";import{s as V,u as C,a as x}from"./VaInput.js";import"colortranslator";import{a as j,u as k,b as P}from"./index67.js";import{u as S}from"./useSyncProp.js";import{s as T}from"./VaTimePicker.js";import{VaDropdown as _,VaDropdownContent as B}from"./index27.js";import{ssrRenderComponent as O,ssrRenderSlot as K}from"@vue/server-renderer";import"./VaConfig.js";import"./useColors.js";import"./useSize.js";import"./global-properties.js";import"./isSymbol.js";import"./ssr-utils.js";import"./useFocus.js";import"./useEmitProxy.js";import"./useCaptureEvent.js";import"./useForm.js";import"./useBem.js";import"./_createCompounder.js";import"cleave.js";import"./VaInputWrapper.js";import"./useCSSVariables.js";import"./index31.js";import"./consts.js";import"./debounce.js";import"./toNumber.js";import"./useArrayRefs.js";import"./useStateful.js";import"./useTextColor.js";const defaultParseDateFunction=e=>{const o=new Date,[n,r,t]=(e=>{const o=e.match(/[0-9]{1,2}/g);return o?o.map((e=>Number(e))):[]})(e),l=(e=>{const o=e.match(/pm|am/i);return o?Number("pm"===o[0].toLowerCase()):null})(e);if(!n)return null;const s=null!==l&&n<=12,a=s&&!!l,p=s&&12===n?0:n;return o.setHours(Math.min(p||0,s?12:24)+(a?12:0)),o.setMinutes(Math.min(r||0,60)),o.setSeconds(Math.min(t||0,60)),o},useTimeParser=e=>{const n=o(!0),parseDate=o=>{const r=(e.parse||defaultParseDateFunction)(o);return r||(n.value=!1),r};return{parse:e=>(n.value=!0,parseDate(e)),isValid:n}},useTimeFormatter=e=>{const formatDate=o=>o?e.ampm?o.toLocaleTimeString("en-US"):o.toLocaleTimeString("en-GB"):"",sliceTime=(e,o,n)=>e.split(":").slice(o,n).join(":");return{format:o=>e.format?e.format(o):(o=>{if("seconds"===e.view)return formatDate(o);const[n,r]=formatDate(o).split(" ");return"minutes"===e.view?r?[sliceTime(n,0,2),r].join(" "):sliceTime(n,0,2):"hours"===e.view?r?[sliceTime(n,0,1),r].join(" "):sliceTime(n,0,1):""})(o)}},$=h(V,["mask","returnRaw","autosize","minRows","maxRows","type","inputmode","counter","maxLength"]);var F=n({name:"VaTimeInput",components:{VaDropdown:_,VaDropdownContent:B,VaTimePicker:T,VaIcon:y,VaInput:V},emits:[...j,...C,"update:modelValue","update:isOpen"],props:{...$,...h(T),...k,isOpen:{type:Boolean,default:void 0},modelValue:{type:Date,default:void 0},clearValue:{type:Date,default:void 0},format:{type:Function},parse:{type:Function},manualInput:{type:Boolean,default:!1},leftIcon:{type:Boolean,default:!1},icon:{type:String,default:"schedule"}},inheritAttrs:!1,setup(e,{emit:o,attrs:n,slots:s}){const a=r(),p=r(),[i]=S("isOpen",e,o,!1),[d]=S("modelValue",e,o),{parse:u,isValid:c}=useTimeParser(e),{format:m}=useTimeFormatter(e),w=t((()=>m(d.value||e.clearValue))),reset=()=>{o("update:modelValue",e.clearValue),o("clear")},focus=()=>{var e;null===(e=a.value)||void 0===e||e.focus()},{computedError:f,computedErrorMessages:g,listeners:b}=P(e,o,reset,focus),{canBeCleared:v,clearIconProps:y,onFocus:V,onBlur:C}=x(e,w),j=t((()=>v.value&&w.value!==m(e.clearValue))),k=t((()=>({name:e.icon,color:e.color,size:"small"}))),_=t((()=>({...I(e,$).value,clearable:!1,rules:[],error:f.value,errorMessages:g.value,readonly:e.readonly||!e.manualInput}))),B=t((()=>({focus:()=>{V(),b.onFocus()},blur:()=>{C(),b.onBlur()}}))),O=t((()=>e.disabled||e.readonly?-1:0)),K=t((()=>({ariaLabel:e.label||"selected time",ariaDisabled:e.disabled,ariaReadonly:e.readonly,tabindex:e.disabled?-1:0,...D(n,["class","style"])}))),F=t((()=>{const o=[e.leftIcon&&"prependInner",(!e.leftIcon||e.clearable)&&"icon"];return Object.keys(s).filter((e=>!o.includes(e)))})),hideDropdown=()=>{i.value=!1,focus()},showDropdownWithoutFocus=()=>{i.value=!0},showDropdown=(e,o,n)=>{o||(n&&(null==e||e.preventDefault()),showDropdownWithoutFocus(),l((()=>{var e;return null===(e=p.value)||void 0===e?void 0:e.focus()})))};return{input:a,timePicker:p,timePickerProps:I(e,h(T)),computedInputProps:_,computedInputAttrs:K,computedInputListeners:B,iconsTabIndexComputed:O,isOpenSync:i,modelValueSync:d,valueText:w,onInputTextChanged:e=>{if(!e)return reset();const o=u(e);c.value&&o?d.value=o:(d.value=void 0,c.value=!0)},canBeClearedComputed:j,iconProps:k,clearIconProps:y,filteredSlots:F,hideDropdown:hideDropdown,showDropdown:showDropdown,toggleDropdown:()=>{i.value?hideDropdown():showDropdown()},toggleDropdownWithoutFocus:()=>{i.value?hideDropdown():showDropdownWithoutFocus()},reset:reset,focus:focus,blur:()=>{var e;null===(e=a.value)||void 0===e||e.blur()},onFocus:V,onBlur:C}}});F.ssrRender=function ssrRender(e,o,n,r,t,l,y,D){const h=s("va-dropdown"),I=s("va-input"),V=s("va-icon"),C=s("va-dropdown-content"),x=s("va-time-picker");o(O(h,a({class:["va-time-input",e.$attrs.class],style:e.$attrs.style,modelValue:e.isOpenSync,"onUpdate:modelValue":o=>e.isOpenSync=o,placement:"bottom-start",offset:[2,0],"close-on-content-click":!1,disabled:e.$props.disabled,anchorSelector:".va-input-wrapper__field",stateful:!1,trigger:"none"},r),{anchor:p(((o,n,r,t)=>{if(!n)return[v(I,a({ref:"input"},{...e.computedInputProps,...e.computedInputAttrs},i(e.computedInputListeners),{modelValue:e.valueText,onChange:o=>e.onInputTextChanged(o.target.value)}),d({prependInner:p((o=>[u(e.$slots,"prependInner",{...o,toggleDropdown:e.toggleDropdown,showDropdown:e.showDropdown,hideDropdown:e.hideDropdown,isOpen:e.isOpenSync,focus:e.focus}),e.$props.leftIcon?(c(),m(V,a({key:0,role:"button","aria-label":"toggle dropdown","aria-hidden":"false",tabindex:e.iconsTabIndexComputed},e.iconProps,{onClick:w(e.toggleDropdown,["stop"]),onKeydown:f(w(e.toggleDropdown,["stop"]),["enter"])}),null,16,["tabindex","onClick","onKeydown"])):g("v-if",!0)])),icon:p((()=>[e.canBeClearedComputed?(c(),m(V,a({key:0,role:"button","aria-label":"reset","aria-hidden":"false",tabindex:e.iconsTabIndexComputed},e.clearIconProps,{onClick:w(e.reset,["stop"]),onKeydown:f(w(e.reset,["stop"]),["enter"]),onFocus:e.onFocus,onBlur:e.onBlur}),null,16,["tabindex","onClick","onKeydown","onFocus","onBlur"])):e.$props.leftIcon?g("v-if",!0):(c(),m(V,a({key:1,role:"button","aria-label":"toggle dropdown","aria-hidden":"false",class:"va-dropdown__icons__reset",tabindex:e.iconsTabIndexComputed},e.iconProps,{onClick:w(e.toggleDropdown,["stop"]),onKeydown:f(w(e.toggleDropdown,["stop"]),["enter"])}),null,16,["tabindex","onClick","onKeydown"]))])),_:2},[b(e.filteredSlots,(o=>({name:o,fn:p((n=>[u(e.$slots,o,{...n,toggleDropdown:e.toggleDropdown,showDropdown:e.showDropdown,hideDropdown:e.hideDropdown,isOpen:e.isOpenSync,focus:e.focus})]))})))]),1040,["modelValue","onChange"])];n(O(I,a({ref:"input"},{...e.computedInputProps,...e.computedInputAttrs},i(e.computedInputListeners),{modelValue:e.valueText}),d({prependInner:p(((o,n,r,t)=>{if(!n)return[u(e.$slots,"prependInner",{...o,toggleDropdown:e.toggleDropdown,showDropdown:e.showDropdown,hideDropdown:e.hideDropdown,isOpen:e.isOpenSync,focus:e.focus}),e.$props.leftIcon?(c(),m(V,a({key:0,role:"button","aria-label":"toggle dropdown","aria-hidden":"false",tabindex:e.iconsTabIndexComputed},e.iconProps,{onClick:w(e.toggleDropdown,["stop"]),onKeydown:f(w(e.toggleDropdown,["stop"]),["enter"])}),null,16,["tabindex","onClick","onKeydown"])):g("v-if",!0)];K(e.$slots,"prependInner",{...o,toggleDropdown:e.toggleDropdown,showDropdown:e.showDropdown,hideDropdown:e.hideDropdown,isOpen:e.isOpenSync,focus:e.focus},null,n,r,t),e.$props.leftIcon?n(O(V,a({role:"button","aria-label":"toggle dropdown","aria-hidden":"false",tabindex:e.iconsTabIndexComputed},e.iconProps),null,r,t)):n("\x3c!----\x3e")})),icon:p(((o,n,r,t)=>{if(!n)return[e.canBeClearedComputed?(c(),m(V,a({key:0,role:"button","aria-label":"reset","aria-hidden":"false",tabindex:e.iconsTabIndexComputed},e.clearIconProps,{onClick:w(e.reset,["stop"]),onKeydown:f(w(e.reset,["stop"]),["enter"]),onFocus:e.onFocus,onBlur:e.onBlur}),null,16,["tabindex","onClick","onKeydown","onFocus","onBlur"])):e.$props.leftIcon?g("v-if",!0):(c(),m(V,a({key:1,role:"button","aria-label":"toggle dropdown","aria-hidden":"false",class:"va-dropdown__icons__reset",tabindex:e.iconsTabIndexComputed},e.iconProps,{onClick:w(e.toggleDropdown,["stop"]),onKeydown:f(w(e.toggleDropdown,["stop"]),["enter"])}),null,16,["tabindex","onClick","onKeydown"]))];e.canBeClearedComputed?n(O(V,a({role:"button","aria-label":"reset","aria-hidden":"false",tabindex:e.iconsTabIndexComputed},e.clearIconProps),null,r,t)):e.$props.leftIcon?n("\x3c!----\x3e"):n(O(V,a({role:"button","aria-label":"toggle dropdown","aria-hidden":"false",class:"va-dropdown__icons__reset",tabindex:e.iconsTabIndexComputed},e.iconProps),null,r,t))})),_:2},[b(e.filteredSlots,(o=>({name:o,fn:p(((n,r,t,l)=>{if(!r)return[u(e.$slots,e.name,{...n,toggleDropdown:e.toggleDropdown,showDropdown:e.showDropdown,hideDropdown:e.hideDropdown,isOpen:e.isOpenSync,focus:e.focus})];K(e.$slots,o,{...n,toggleDropdown:e.toggleDropdown,showDropdown:e.showDropdown,hideDropdown:e.hideDropdown,isOpen:e.isOpenSync,focus:e.focus},null,r,t,l)}))})))]),r,t))})),default:p(((o,n,r,t)=>{if(!n)return[v(C,{"no-padding":"",onKeydown:f(w(e.hideDropdown,["prevent"]),["esc"]),onKeypress:f(w(e.hideDropdown,["prevent"]),["enter"])},{default:p((()=>[v(x,a({ref:"timePicker"},e.timePickerProps,{modelValue:e.modelValueSync,"onUpdate:modelValue":o=>e.modelValueSync=o}),null,16,["modelValue","onUpdate:modelValue"])])),_:1},8,["onKeydown","onKeypress"])];n(O(C,{"no-padding":""},{default:p(((o,n,r,t)=>{if(!n)return[v(x,a({ref:"timePicker"},e.timePickerProps,{modelValue:e.modelValueSync,"onUpdate:modelValue":o=>e.modelValueSync=o}),null,16,["modelValue","onUpdate:modelValue"])];n(O(x,a({ref:"timePicker"},e.timePickerProps,{modelValue:e.modelValueSync,"onUpdate:modelValue":o=>e.modelValueSync=o}),null,r,t))})),_:1},r,t))})),_:3},n))},F.__file="src/components/va-time-input/VaTimeInput.vue";const L=e(F);export{L as VaTimeInput};
//# sourceMappingURL=index51.js.map
