import{w as e}from"./withConfigTransport.js";import{computed as o,onMounted as t,onBeforeUnmount as r,ref as i,watch as a,defineComponent as l,resolveComponent as s,mergeProps as n,withCtx as u,createVNode as c,createTextVNode as d,toDisplayString as v}from"vue";import"./global-config.js";import"./usePopover.js";import"./global-utils.js";import{u as m}from"./useColors.js";import"colortranslator";import{a as p,u as f,b as h}from"./useStateful.js";import{VaImage as g}from"./index32.js";import{VaButton as x}from"./index12.js";import{VaHover as S}from"./index30.js";import{ssrRenderAttrs as _,ssrRenderSlot as C,ssrRenderComponent as y,ssrRenderList as j,ssrInterpolate as $,ssrRenderStyle as b,ssrRenderAttr as w}from"@vue/server-renderer";import"./VaConfig.js";import"./global-properties.js";import"./isSymbol.js";import"./ssr-utils.js";import"./VaButton.js";import"./useLoading.js";import"./useRouterLink.js";import"./useSize.js";import"./useTextColor.js";import"./index31.js";import"./VaIcon.js";import"./index43.js";import"./clamp.js";import"./toNumber.js";const useCarouselAnimation=(e,l)=>{let s=-1,n=1;const start=()=>{e.autoscroll&&(clearInterval(s),s=setInterval((()=>{e.infinite?(l.value+=1,l.value>=e.items.length&&(l.value=0)):(l.value<=0&&(n=1),l.value>=e.items.length-1&&(n=-1),l.value+=n)}),e.autoscrollInterval))};let u;const pause=()=>{e.autoscroll&&(clearInterval(s),u=setTimeout((()=>{start(),clearTimeout(u)}),e.autoscrollPauseDuration))},stop=()=>{clearInterval(s),clearTimeout(u)};t((()=>start())),r((()=>stop()));const c=i({transition:void 0}),d=i(0),v=o((()=>"fade"===e.effect?{...c.value,transition:"none"}:e.vertical?{...c.value,transform:`translateY(${-100*d.value}%)`}:{...c.value,transform:`translateX(${-100*d.value}%)`})),m={isAnimating:!1,speed:.3,order:[],move(o,t){const r=e.items.length-1,i=e.items.length;0===t&&o===r?(this.order.push({to:i}),this.order.push({to:0,animate:!1})):t===r&&0===o?(this.order.push({to:i,animate:!1}),this.order.push({to:t})):this.order.push({to:t}),this.isAnimating||this.runAnimation()},runAnimation(){this.isAnimating=!0;const e=this.order.shift();e?(d.value=null==e?void 0:e.to,e.animate||void 0===e.animate?(c.value.transition=`all ${this.speed}s linear`,setTimeout((()=>{this.runAnimation()}),1e3*this.speed)):(c.value.transition="none",setTimeout((()=>{this.runAnimation()}),16))):this.isAnimating=!1}};a(l,((e,o)=>{m.move(o,e)}));const p=o((()=>"fade"===e.effect?[e.items[l.value]]:e.infinite?[...e.items,e.items[0]]:e.items));return{start:start,pause:pause,stop:stop,withPause:e=>(...o)=>{pause(),e(...o)},computedSlidesStyle:v,slides:p}},useCarouselColor=()=>{const{setHSLAColor:e,getColor:t}=m();return{computedColor:o((()=>e(t("dark"),{a:.7}))),computedHoverColor:o((()=>e(t("primary"),{a:.7}))),computedActiveColor:o((()=>t("primary")))}};var T=l({name:"VaCarousel",components:{VaImage:g,VaButton:x,VaHover:S},props:{...p,modelValue:{type:Number,default:0},items:{type:Array,required:!0},autoscroll:{type:Boolean,default:!1},autoscrollInterval:{type:Number,default:1e3},autoscrollPauseDuration:{type:Number,default:2e3},infinite:{type:Boolean,default:!1},fadeKeyframe:{type:String,default:"va-carousel-fade-appear 1s"},arrows:{type:Boolean,default:!0},indicators:{type:Boolean,default:!0},indicatorTrigger:{type:String,default:"click",validator:e=>["click","hover"].includes(e)},vertical:{type:Boolean,default:!1},height:{type:String,default:"300px"},effect:{type:String,default:"transition",validator:e=>["fade","transition"].includes(e)},color:{type:String,default:"primary"}},emits:f,setup(e,{emit:t}){const{valueComputed:r}=h(e,t,0),{goTo:i,next:a,prev:l,doShowNextButton:s,doShowPrevButton:n}=((e,t)=>({doShowPrevButton:o((()=>t.value>0||e.infinite)),doShowNextButton:o((()=>t.value<e.items.length-1||e.infinite)),goTo:e=>{t.value=e},prev:()=>{e.infinite&&t.value<=0?t.value=e.items.length-1:t.value-=1},next:()=>{e.infinite&&t.value>=e.items.length-1?t.value=0:t.value+=1}}))(e,r),{withPause:u,computedSlidesStyle:c,slides:d}=useCarouselAnimation(e,r),v=o((()=>e.items.length&&e.items.every((e=>!!e&&"object"==typeof e&&!!(null==e?void 0:e.src)))));return{doShowNextButton:s,doShowPrevButton:n,computedSlidesStyle:c,goTo:u(i),prev:u(l),next:u(a),slides:d,isObjectSlides:v,isCurrentSlide:e=>+e===r.value,...useCarouselColor()}}});T.ssrRender=function ssrRender(e,o,t,r,i,a,l,m){const p=s("va-hover"),f=s("va-button"),h=s("va-image");o(`<div${_(n({class:["va-carousel",{"va-carousel--vertical":e.$props.vertical,[`va-carousel--${e.$props.effect}`]:!0}],style:{height:e.height},role:"region","aria-label":"carousel"},r))}>`),e.$props.arrows?(o("\x3c!--[--\x3e"),e.doShowPrevButton?(o('<div class="va-carousel__arrow va-carousel__arrow--left">'),C(e.$slots,"prev-arrow",{},(()=>{o(y(p,{stateful:""},{default:u((({hover:o},t,r,i)=>{if(!t)return[c(f,{color:o?e.computedHoverColor:e.computedColor,icon:e.vertical?"expand_less":"chevron_left","aria-label":"go previous slide"},null,8,["color","icon"])];t(y(f,{color:o?e.computedHoverColor:e.computedColor,icon:e.vertical?"expand_less":"chevron_left","aria-label":"go previous slide"},null,r,i))})),_:1},t))}),o,t),o("</div>")):o("\x3c!----\x3e"),e.doShowNextButton?(o('<div class="va-carousel__arrow va-carousel__arrow--right">'),C(e.$slots,"next-arrow",{},(()=>{o(y(p,{stateful:""},{default:u((({hover:o},t,r,i)=>{if(!t)return[c(f,{color:o?e.computedHoverColor:e.computedColor,icon:e.vertical?"expand_more":"chevron_right","aria-label":"go next slide"},null,8,["color","icon"])];t(y(f,{color:o?e.computedHoverColor:e.computedColor,icon:e.vertical?"expand_more":"chevron_right","aria-label":"go next slide"},null,r,i))})),_:1},t))}),o,t),o("</div>")):o("\x3c!----\x3e"),o("\x3c!--]--\x3e")):o("\x3c!----\x3e"),e.$props.indicators?(o('<div class="va-carousel__indicators">\x3c!--[--\x3e'),j(e.$props.items,((r,i)=>{o(`<div${_(n({class:["va-carousel__indicator",{"va-carousel__indicator--active":i===e.modelValue}],key:i},"hover"===e.indicatorTrigger?{onmouseover:()=>e.goTo(i)}:{onclick:()=>e.goTo(i)}))}>`),C(e.$slots,"indicator",{item:r,index:i,goTo:e.goTo,isActive:e.isCurrentSlide(i)},(()=>{o(y(p,{stateful:""},{default:u((({hover:o},t,r,a)=>{if(!t)return[c(f,{"aria-label":`go slide #${i+1}`,round:"",color:e.isCurrentSlide(i)?e.computedActiveColor:o?e.computedHoverColor:e.computedColor},{default:u((()=>[d(v(i+1),1)])),_:2},1032,["aria-label","color"])];t(y(f,{"aria-label":`go slide #${i+1}`,round:"",color:e.isCurrentSlide(i)?e.computedActiveColor:o?e.computedHoverColor:e.computedColor},{default:u(((e,o,t,r)=>{if(!o)return[d(v(i+1),1)];o(`${$(i+1)}`)})),_:2},r,a))})),_:2},t))}),o,t),o("</div>")})),o("\x3c!--]--\x3e</div>")):o("\x3c!----\x3e"),o(`<div class="va-carousel__content"><div class="va-carousel__slides" style="${b(e.computedSlidesStyle)}" role="list">\x3c!--[--\x3e`),j(e.slides,((r,i)=>{o(`<div class="va-carousel__slide" style="${b("fade"===e.effect?{animation:e.fadeKeyframe}:"")}" role="listitem"${w("aria-hidden",!e.isCurrentSlide(i))}${w("aria-current",e.isCurrentSlide(i))}${w("aria-label",`slide ${i+1} of ${e.slides.length}`)}>`),C(e.$slots,"default",{item:r,index:i,goTo:e.goTo,isActive:e.isCurrentSlide(i)},(()=>{o(y(h,{src:e.isObjectSlides?r.src:r,alt:e.isObjectSlides?r.alt:""},null,t))}),o,t),o("</div>")})),o("\x3c!--]--\x3e</div></div></div>")},T.__file="src/components/va-carousel/VaCarousel.vue";const A=e(T);export{A as VaCarousel};
//# sourceMappingURL=index14.js.map
