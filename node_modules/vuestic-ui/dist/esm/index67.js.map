{"version":3,"file":"index67.js","sources":["../../../../node_modules/lodash/isString.js","../../src/composables/useValidation.ts","../../src/components/va-input/components/VaMessageList/VaMessageList.vue","../../src/components/va-input/components/VaMessageList/VaMessageList.vue?vue&type=template&id=878736da&lang.js","../../src/components/va-input/components/VaMessageList/index.ts"],"sourcesContent":["var baseGetTag = require('./_baseGetTag'),\n    isArray = require('./isArray'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar stringTag = '[object String]';\n\n/**\n * Checks if `value` is classified as a `String` primitive or object.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a string, else `false`.\n * @example\n *\n * _.isString('abc');\n * // => true\n *\n * _.isString(1);\n * // => false\n */\nfunction isString(value) {\n  return typeof value == 'string' ||\n    (!isArray(value) && isObjectLike(value) && baseGetTag(value) == stringTag);\n}\n\nmodule.exports = isString;\n","import { inject, onBeforeUnmount, onMounted, PropType, watch, ExtractPropTypes } from 'vue'\nimport flatten from 'lodash/flatten.js'\nimport isFunction from 'lodash/isFunction.js'\nimport isString from 'lodash/isString.js'\n\nimport { useSyncProp } from './useSyncProp'\nimport { useFocus } from './useFocus'\nimport { FormServiceKey } from '../components/va-form/consts'\n\ntype ValidationRule<V extends any = any> = ((v: V) => any | string)\n\nconst normalizeValidationRules = (rules: string | ValidationRule[] = [], callArguments: unknown = null) => {\n  if (isString(rules)) { rules = [rules] as any }\n\n  return (rules as ValidationRule[])\n    .map((rule) => isFunction(rule) ? rule(callArguments) : rule)\n}\n\nexport const useValidationProps = {\n  modelValue: { required: false },\n  error: { type: Boolean, default: undefined },\n  errorMessages: { type: [Array, String] as PropType<string[] | string>, default: undefined },\n  errorCount: { type: [String, Number], default: 1 },\n  rules: { type: Array as PropType<ValidationRule<any>[]>, default: () => [] as any },\n  success: { type: Boolean, default: false },\n  messages: { type: [Array, String] as PropType<string[] | string>, default: () => [] },\n  immediateValidation: { type: Boolean, default: false },\n}\n\nexport type ValidationProps<V extends any> = typeof useValidationProps & {\n  modelValue: { type: PropType<V> }\n  rules: { type: PropType<ValidationRule<V>[]> }\n}\n\nexport const useValidationEmits = ['update:error', 'update:errorMessages']\n\nexport const useValidation = <V, P extends ExtractPropTypes<typeof useValidationProps>>(\n  props: P,\n  emit: (event: any, ...args: any[]) => void,\n  reset: () => any,\n  focus: () => any,\n) => {\n  const { isFocused, onFocus, onBlur } = useFocus()\n\n  const [computedError] = useSyncProp('error', props, emit, false)\n  const [computedErrorMessages] = useSyncProp('errorMessages', props, emit, [] as string[])\n\n  const resetValidation = () => {\n    computedError.value = false\n    computedErrorMessages.value = []\n  }\n\n  const validate = (): boolean => {\n    if (!props.rules || !props.rules.length) {\n      return true\n    }\n\n    let error = false\n    let errorMessages: string[] = []\n\n    const rules = flatten(props.rules)\n\n    normalizeValidationRules(rules, props.modelValue)\n      .forEach((validationResult: boolean | string) => {\n        if (isString(validationResult)) {\n          errorMessages = [...errorMessages, validationResult]\n          error = true\n        } else if (validationResult === false) {\n          error = true\n        }\n      })\n\n    computedErrorMessages.value = errorMessages\n    computedError.value = error\n\n    return !error\n  }\n\n  watch(isFocused, (newVal) => !newVal && validate())\n\n  watch(() => props.modelValue, () => validate(), { immediate: props.immediateValidation })\n\n  const context = {\n    resetValidation,\n    focus,\n    validate,\n    reset,\n    hasError: () => computedError.value,\n  }\n\n  const form = inject(FormServiceKey, undefined)\n\n  onMounted(() => {\n    form?.onChildMounted(context as any)\n  })\n\n  onBeforeUnmount(() => {\n    form?.onChildUnmounted(context as any)\n  })\n\n  return {\n    computedError,\n    computedErrorMessages,\n    listeners: { onFocus, onBlur },\n    validate,\n    resetValidation,\n  }\n}\n","<template>\n  <div\n    v-if=\"messages.length\"\n    class=\"va-message-list\"\n    :style=\"computedStyle\"\n  >\n    <div\n      v-for=\"(message, index) in messages\"\n      :key=\"index\"\n      class=\"va-message-list__message\"\n    >\n      {{ message }}\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { computed, defineComponent, PropType } from 'vue'\nimport { useColors } from '../../../../composables'\n\nexport default defineComponent({\n  name: 'VaMessageList',\n\n  props: {\n    modelValue: {\n      type: [String, Array] as PropType<string | string[]>,\n      default: '',\n    },\n    limit: { type: Number, default: 1 },\n    color: { type: String },\n  },\n\n  setup (props) {\n    const { getColor } = useColors()\n\n    return {\n      messages: computed<string[]>(() => {\n        if (!props.modelValue) { return [] }\n        if (!Array.isArray(props.modelValue)) { return [props.modelValue] }\n        return props.modelValue.slice(0, props.limit)\n      }),\n      computedStyle: computed(() => props.color ? { color: getColor(props.color) } : {}),\n    }\n  },\n})\n</script>\n\n<style lang=\"scss\">\n@import \"../../../../styles/resources/index.scss\";\n\n.va-message-list {\n  color: var(--va-message-list-color);\n\n  &__message {\n    vertical-align: var(--va-message-list-vertical-align);\n    font-size: var(--va-message-list-font-size);\n    line-height: var(--va-message-list-line-height);\n  }\n}\n</style>\n","<template>\n  <div\n    v-if=\"messages.length\"\n    class=\"va-message-list\"\n    :style=\"computedStyle\"\n  >\n    <div\n      v-for=\"(message, index) in messages\"\n      :key=\"index\"\n      class=\"va-message-list__message\"\n    >\n      {{ message }}\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { computed, defineComponent, PropType } from 'vue'\nimport { useColors } from '../../../../composables'\n\nexport default defineComponent({\n  name: 'VaMessageList',\n\n  props: {\n    modelValue: {\n      type: [String, Array] as PropType<string | string[]>,\n      default: '',\n    },\n    limit: { type: Number, default: 1 },\n    color: { type: String },\n  },\n\n  setup (props) {\n    const { getColor } = useColors()\n\n    return {\n      messages: computed<string[]>(() => {\n        if (!props.modelValue) { return [] }\n        if (!Array.isArray(props.modelValue)) { return [props.modelValue] }\n        return props.modelValue.slice(0, props.limit)\n      }),\n      computedStyle: computed(() => props.color ? { color: getColor(props.color) } : {}),\n    }\n  },\n})\n</script>\n\n<style lang=\"scss\">\n@import \"../../../../styles/resources/index.scss\";\n\n.va-message-list {\n  color: var(--va-message-list-color);\n\n  &__message {\n    vertical-align: var(--va-message-list-vertical-align);\n    font-size: var(--va-message-list-font-size);\n    line-height: var(--va-message-list-line-height);\n  }\n}\n</style>\n","import withConfigTransport from '../../../../services/config-transport/withConfigTransport'\nimport _VaMessageList from './VaMessageList.vue'\n\nexport const VaMessageList = withConfigTransport(_VaMessageList)\n"],"names":["require$$0","require$$1","require$$2","isString","isFunction","flatten","_createElementBlock","_openBlock","_Fragment","_renderList","_VaMessageList"],"mappings":"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"}