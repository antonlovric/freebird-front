{"version":3,"file":"useSize.js","sources":["../../src/composables/useSize.ts"],"sourcesContent":["import { computed, getCurrentInstance, PropType } from 'vue'\n\nimport { useGlobalConfig, SizeConfig } from '../services/global-config/global-config'\nimport type { VuesticComponentName } from '../vuestic-plugin/global-components'\n\nexport const sizesConfig: SizeConfig = {\n  defaultSize: 48,\n  sizes: {\n    small: 32,\n    medium: 48,\n    large: 64,\n  },\n}\n\nexport const fontSizesConfig: SizeConfig = {\n  defaultSize: 1,\n  sizes: {\n    small: 0.75,\n    medium: 1,\n    large: 1.25,\n  },\n}\n\ninterface SizeProps {\n  size: string | number;\n  sizesConfig: Record<string, any>;\n  fontSizesConfig: Record<string, any>;\n}\n\n/**\n * You could add these props to any component by destructuring them inside props option.\n * @example\n * props: { ...useSizeProps, componentsOwnProp, etc. }\n * It's better to add props at the beginning, to make sure that Component own props will be used instead in case of collision\n */\nexport const useSizeProps = {\n  size: {\n    type: [String, Number],\n    default: '',\n    validator: (size: string | number) => {\n      return typeof size === 'string' || typeof size === 'number'\n    },\n  },\n\n  sizesConfig: {\n    type: Object as PropType<Record<string, any>>,\n    default: () => sizesConfig,\n  },\n\n  fontSizesConfig: {\n    type: Object as PropType<Record<string, any>>,\n    default: () => fontSizesConfig,\n  },\n}\n\nconst fontRegex = /(?<fontSize>\\d+)(?<extension>px|rem)/i\n\nconst convertToRem = (px: number) => px / 16 - 0.5\n\nexport const useSize = (\n  props: SizeProps,\n  componentName: string | undefined = getCurrentInstance()?.type.name,\n) => {\n  const { getGlobalConfig } = useGlobalConfig()\n\n  const sizesConfigGlobal = computed<SizeConfig>(() => {\n    return componentName\n      ? (getGlobalConfig().components as any)?.[componentName as VuesticComponentName]?.sizesConfig\n      : undefined\n  })\n\n  const sizeComputed = computed<string>(() => {\n    const { defaultSize, sizes } = props.sizesConfig\n    const defaultSizeGlobal = sizesConfigGlobal.value?.defaultSize\n\n    if (!props.size) { return `${defaultSizeGlobal || defaultSize}px` }\n\n    if (typeof props.size === 'string') {\n      const sizeFromGlobalConfig = sizesConfigGlobal.value?.sizes?.[props.size]\n      const sizeFromProps = sizes[props.size]\n\n      if (sizeFromGlobalConfig) { return `${sizeFromGlobalConfig}px` }\n      if (sizeFromProps) { return `${sizeFromProps}px` }\n\n      return props.size\n    }\n\n    return `${props.size}px`\n  })\n\n  const fontSizeInRem = computed<number>(() => {\n    const { defaultSize, sizes } = props.fontSizesConfig\n\n    if (!props.size) { return defaultSize }\n\n    if (typeof props.size === 'string') {\n      if (props.size in sizes) { return sizes[props.size] }\n\n      const fontSizeParsed = props.size.match(fontRegex)\n      if (!fontSizeParsed || !fontSizeParsed.groups) {\n        throw new Error('Size prop should be either valid string or number')\n      }\n\n      const { extension, fontSize } = fontSizeParsed.groups\n      return extension === 'rem' ? +fontSize : convertToRem(+fontSize)\n    }\n\n    return convertToRem(props.size)\n  })\n\n  const fontSizeComputed = computed<string>(() => `${fontSizeInRem.value}rem`)\n\n  return {\n    sizeComputed,\n    fontSizeComputed,\n    fontSizeInRem,\n  }\n}\n"],"names":[],"mappings":"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"}