{"version":3,"file":"index65.js","sources":["../../src/services/global-config/plugin/index.ts","../../src/services/color-config/plugin/create-color-config-plugin.ts","../../src/services/color-config/plugin/index.ts"],"sourcesContent":["import { App } from 'vue'\nimport { createGlobalConfig, GLOBAL_CONFIG } from '../global-config'\nimport { GlobalConfig } from '../types'\nimport { defineGlobalProperty, defineVuesticPlugin } from '../../../vuestic-plugin/utils'\n\n/** Provides global configuration to Vuestic components */\nexport const GlobalConfigPlugin = defineVuesticPlugin((config: GlobalConfig | undefined) => ({\n  install (app: App) {\n    const globalConfig = createGlobalConfig()\n\n    if (config) { globalConfig.mergeGlobalConfig(config) }\n\n    app.provide(GLOBAL_CONFIG, globalConfig)\n\n    defineGlobalProperty(app, '$vaConfig', globalConfig)\n  },\n}))\n\ndeclare module 'vue' {\n  export interface ComponentCustomProperties {\n    $vaConfig: ReturnType<typeof createGlobalConfig>\n  }\n}\n","import { App, watch } from 'vue'\nimport { GlobalConfig } from '../../global-config/global-config'\nimport { isServer } from '../../../utils/ssr-utils'\nimport { getGlobalProperty } from '../../../vuestic-plugin/utils'\n\nexport const setCSSVariable = (name: string, value: string, root: HTMLElement) => {\n  root.style.setProperty(`--va-${name}`, value)\n}\n\nexport const createColorConfigPlugin = (app: App) => {\n  const globalConfig = getGlobalProperty(app, '$vaConfig').globalConfig\n\n  /** Renders CSS varialbes string. Use this in SSR mode */\n  const renderCSSVarialbes = (colors: GlobalConfig['colors'] = globalConfig.value.colors) => {\n    if (!colors) { return }\n\n    const colorNames = Object.keys(colors)\n    return colorNames.map((key) => `--va-${key}: ${colors[key]}`).join(';')\n  }\n\n  const updateColors = (newValue: GlobalConfig['colors']) => {\n    if (!newValue) { return }\n    if (isServer()) { return }\n\n    const root = document.documentElement\n\n    const colorNames = Object.keys(newValue)\n    colorNames.forEach((key) => {\n      setCSSVariable(key, newValue[key], root)\n    })\n  }\n\n  updateColors(globalConfig.value.colors)\n\n  watch(() => globalConfig.value.colors, (newValue) => {\n    updateColors(newValue)\n  }, { immediate: true, deep: true })\n\n  return { renderCSSVarialbes, updateColors }\n}\n","import type { Plugin } from 'vue'\nimport { createColorConfigPlugin } from './create-color-config-plugin'\nimport { defineGlobalProperty, defineVuesticPlugin } from '../../../vuestic-plugin/utils'\n\n/** Creates color css variables and reactively updates on ColorConfig changes. */\nexport const ColorConfigPlugin = defineVuesticPlugin(() => ({\n  install (app) {\n    defineGlobalProperty(app, '$vaColorConfig', createColorConfigPlugin(app))\n  },\n}))\n\ndeclare module 'vue' {\n  export interface ComponentCustomProperties {\n    $vaColorConfig: ReturnType<typeof createColorConfigPlugin>\n  }\n}\n"],"names":[],"mappings":";;;;;;AAKA;AACa,MAAA,kBAAkB,GAAG,mBAAmB,CAAC,CAAC,MAAgC,MAAM;AAC3F,IAAA,OAAO,CAAE,GAAQ,EAAA;AACf,QAAA,MAAM,YAAY,GAAG,kBAAkB,EAAE,CAAA;AAEzC,QAAA,IAAI,MAAM,EAAE;AAAE,YAAA,YAAY,CAAC,iBAAiB,CAAC,MAAM,CAAC,CAAA;AAAE,SAAA;AAEtD,QAAA,GAAG,CAAC,OAAO,CAAC,aAAa,EAAE,YAAY,CAAC,CAAA;AAExC,QAAA,oBAAoB,CAAC,GAAG,EAAE,WAAW,EAAE,YAAY,CAAC,CAAA;KACrD;AACF,CAAA,CAAC;;ACXK,MAAM,cAAc,GAAG,CAAC,IAAY,EAAE,KAAa,EAAE,IAAiB,KAAI;IAC/E,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,CAAQ,KAAA,EAAA,IAAI,CAAE,CAAA,EAAE,KAAK,CAAC,CAAA;AAC/C,CAAC,CAAA;AAEM,MAAM,uBAAuB,GAAG,CAAC,GAAQ,KAAI;IAClD,MAAM,YAAY,GAAG,iBAAiB,CAAC,GAAG,EAAE,WAAW,CAAC,CAAC,YAAY,CAAA;;IAGrE,MAAM,kBAAkB,GAAG,CAAC,MAAiC,GAAA,YAAY,CAAC,KAAK,CAAC,MAAM,KAAI;QACxF,IAAI,CAAC,MAAM,EAAE;YAAE,OAAM;AAAE,SAAA;QAEvB,MAAM,UAAU,GAAG,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAA;QACtC,OAAO,UAAU,CAAC,GAAG,CAAC,CAAC,GAAG,KAAK,CAAQ,KAAA,EAAA,GAAG,KAAK,MAAM,CAAC,GAAG,CAAC,CAAE,CAAA,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAA;AACzE,KAAC,CAAA;AAED,IAAA,MAAM,YAAY,GAAG,CAAC,QAAgC,KAAI;QACxD,IAAI,CAAC,QAAQ,EAAE;YAAE,OAAM;AAAE,SAAA;QACzB,IAAI,QAAQ,EAAE,EAAE;YAAE,OAAM;AAAE,SAAA;AAE1B,QAAA,MAAM,IAAI,GAAG,QAAQ,CAAC,eAAe,CAAA;QAErC,MAAM,UAAU,GAAG,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAA;AACxC,QAAA,UAAU,CAAC,OAAO,CAAC,CAAC,GAAG,KAAI;YACzB,cAAc,CAAC,GAAG,EAAE,QAAQ,CAAC,GAAG,CAAC,EAAE,IAAI,CAAC,CAAA;AAC1C,SAAC,CAAC,CAAA;AACJ,KAAC,CAAA;AAED,IAAA,YAAY,CAAC,YAAY,CAAC,KAAK,CAAC,MAAM,CAAC,CAAA;AAEvC,IAAA,KAAK,CAAC,MAAM,YAAY,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC,QAAQ,KAAI;QAClD,YAAY,CAAC,QAAQ,CAAC,CAAA;KACvB,EAAE,EAAE,SAAS,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC,CAAA;AAEnC,IAAA,OAAO,EAAE,kBAAkB,EAAE,YAAY,EAAE,CAAA;AAC7C,CAAC;;ACnCD;MACa,iBAAiB,GAAG,mBAAmB,CAAC,OAAO;AAC1D,IAAA,OAAO,CAAE,GAAG,EAAA;QACV,oBAAoB,CAAC,GAAG,EAAE,gBAAgB,EAAE,uBAAuB,CAAC,GAAG,CAAC,CAAC,CAAA;KAC1E;AACF,CAAA,CAAC;;;;"}