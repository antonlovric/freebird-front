import{w as e}from"./withConfigTransport.mjs";import{defineComponent as l,shallowRef as a,ref as t,computed as r,onMounted as o,onBeforeUnmount as n,openBlock as u,createElementBlock as i,normalizeStyle as v,createElementVNode as s,renderSlot as p}from"vue";import{w as d}from"./utils.mjs";import"./VaConfig.mjs";import"./global-config.mjs";import"./global-properties.mjs";import"./global-utils.mjs";var m=l({name:"VaParallax",props:{target:{type:[Object,String]},src:{type:String,default:"",required:!0},alt:{type:String,default:"parallax"},height:{type:Number,default:400},reversed:{type:Boolean,default:!1},speed:{type:Number,default:.5,validator:e=>e>=0&&e<=1}},setup(e){const l=a(),u=a(),i=t(0),v=t(0),s=t(0),p=t(0),m=t(0),c=t(0),g=t(0),f=t(!1),h=r((()=>({height:e.height+"px"}))),y=r((()=>({display:"block",transform:`translate(-50%, ${v.value}px)`,opacity:f.value?1:0,top:e.reversed?0:"auto"}))),x=r((()=>{var a;if(!e.target)return getScrollableParent(null===(a=l.value)||void 0===a?void 0:a.parentElement);if(e.target instanceof HTMLElement)return e.target;const t=document.querySelector(e.target);return t||(d("VaParallax target prop got wrong selector. Target is null"),null)})),getScrollableParent=e=>e?e.scrollHeight>e.clientHeight?e:getScrollableParent(e.parentElement):document.body,E=r((()=>{var e;return(null===(e=u.value)||void 0===e?void 0:e.naturalHeight)||0})),translate=()=>{(()=>{var a,t;const r=(null===(a=l.value)||void 0===a?void 0:a.getBoundingClientRect())||{top:0};m.value=(null===(t=x.value)||void 0===t?void 0:t.scrollTop)||0,s.value=E.value-e.height,i.value=r.top+m.value,c.value=window.innerHeight,g.value=m.value+c.value})(),p.value=(g.value-i.value)/(e.height+c.value),v.value=Math.round(s.value*p.value)*e.speed,e.reversed&&(v.value=-v.value)},addEventListeners=()=>{var e,l;null===(e=x.value)||void 0===e||e.addEventListener("scroll",translate),null===(l=x.value)||void 0===l||l.addEventListener("resize",translate)};return o((()=>{var e,l;(null===(e=u.value)||void 0===e?void 0:e.complete)?(translate(),addEventListeners()):null===(l=u.value)||void 0===l||l.addEventListener("load",(()=>{translate(),addEventListeners()}),!1),f.value=!0})),n((()=>{var e,l;null===(e=x.value)||void 0===e||e.removeEventListener("scroll",translate),null===(l=x.value)||void 0===l||l.removeEventListener("resize",translate)})),{img:u,rootElement:l,computedWrapperStyles:h,computedImgStyles:y}}});const c={class:"va-parallax__image-container"},g=["src","alt"],f={class:"va-parallax__item-container"};m.render=function render(e,l,a,t,r,o){return u(),i("div",{ref:"rootElement",class:"va-parallax",style:v(e.computedWrapperStyles)},[s("div",c,[s("img",{ref:"img",class:"va-parallax__image",src:e.$props.src,alt:e.$props.alt,style:v(e.computedImgStyles)},null,12,g)]),s("div",f,[p(e.$slots,"default")])],4)},m.__file="src/components/va-parallax/VaParallax.vue";const h=e(m);export{h as VaParallax};
//# sourceMappingURL=index40.mjs.map
