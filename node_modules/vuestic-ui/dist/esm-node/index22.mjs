import{w as e}from"./withConfigTransport.mjs";import{defineComponent as t,shallowRef as o,computed as n,resolveComponent as a,openBlock as s,createBlock as r,mergeProps as u,withKeys as i,withModifiers as l,createSlots as p,withCtx as m,createElementBlock as c,createCommentVNode as d,createElementVNode as v,normalizeStyle as f,renderSlot as C,normalizeProps as b,guardReactiveProps as y,createVNode as g}from"vue";import{s as j,o as _}from"./VaIcon.mjs";import{e as I}from"./usePopover.mjs";import"./global-config.mjs";import"./global-utils.mjs";import{u as x,a as N}from"./useFocus.mjs";import{u as S}from"./useColors.mjs";import{u as V}from"./useEmitProxy.mjs";import{u as k}from"./useForm.mjs";import{a as B,b as w}from"./useStateful.mjs";import{s as P}from"./css-utils.mjs";import{s as h}from"./VaInputWrapper.mjs";import{s as L}from"./VaButton.mjs";import"./VaConfig.mjs";import"./useSize.mjs";import"./isSymbol.mjs";import"./ssr-utils.mjs";import"./global-properties.mjs";import"colortranslator";import"./useBem.mjs";import"./_createCompounder.mjs";import"./useCSSVariables.mjs";import"./index67.mjs";import"./useSyncProp.mjs";import"./consts.mjs";import"./index31.mjs";import"./useLoading.mjs";import"./useRouterLink.mjs";import"./useTextColor.mjs";import"./index43.mjs";import"./clamp.mjs";import"./toNumber.mjs";const{createEmits:$,createListeners:A}=V(["change"]),{createEmits:F,createListeners:M}=V([{listen:"click-prepend",emit:"click:decrease-button"},{listen:"click-append",emit:"click:increase-button"},{listen:"click-prepend-inner",emit:"click:decrease-icon"},{listen:"click-append-inner",emit:"click:increase-icon"}]);var W=t({name:"VaCounter",components:{VaInputWrapper:h,VaIcon:j,VaButton:L},props:{...k,...B,modelValue:{type:[String,Number],default:0},manualInput:{type:Boolean,default:!1},stateful:{type:Boolean,default:!1},min:{type:Number,default:void 0},max:{type:Number,default:void 0},step:{type:Number,default:1},label:{type:String,default:""},messages:{type:[Array,String],default:()=>[]},width:{type:[String,Number],default:"160px"},color:{type:String,default:"primary"},outline:{type:Boolean},bordered:{type:Boolean},increaseIcon:{type:String,default:"add"},decreaseIcon:{type:String,default:"remove"},buttons:{type:Boolean,default:!1},flat:{type:Boolean,default:!0},rounded:{type:Boolean,default:!1},margins:{type:[String,Number],default:"4px"},textColor:{type:String,default:void 0}},emits:["update:modelValue",...$(),...F(),...x],inheritAttrs:!1,setup(e,{emit:t,attrs:a}){const s=o(),{isFocused:r,focus:u,blur:i}=N(s,t),{valueComputed:l}=w(e,t),getRoundDownWithStep=t=>e.min&&e.step?e.min+e.step*Math.floor((t-e.min)/e.step):t,calculateCounterValue=t=>{e.min&&t<e.min?l.value=e.min:e.max&&t>e.max?l.value=getRoundDownWithStep(e.max):l.value=getRoundDownWithStep(t)},p=n((()=>!!e.min&&Number(l.value)<=e.min)),m=n((()=>!!e.max&&(e.step?Number(l.value)>e.max-e.step:Number(l.value)>=e.max))),c=n((()=>e.disabled?-1:0)),d=n((()=>p.value||e.readonly||e.disabled)),v=n((()=>m.value||e.readonly||e.disabled)),decreaseCount=()=>{d.value||calculateCounterValue(Number(l.value)-e.step)},increaseCount=()=>{v.value||calculateCounterValue(Number(l.value)+e.step)},{getColor:f}=S(),C=n((()=>f(e.color))),b=n((()=>({class:{"va-counter__icon--inactive":d.value},color:C.value,name:e.decreaseIcon,...!d.value&&{onClick:decreaseCount}}))),y=n((()=>({class:{"va-counter__icon--inactive":v.value},color:C.value,name:e.increaseIcon,...!v.value&&{onClick:increaseCount}}))),g=n((()=>0===("string"==typeof e.margins?parseFloat(e.margins):e.margins))),j=n((()=>({...I(e,["rounded","color","textColor"]),flat:e.flat&&!e.outline,outline:e.flat&&e.outline}))),x=n((()=>({...j.value,icon:e.decreaseIcon,disabled:d.value}))),V=n((()=>({...j.value,icon:e.increaseIcon,disabled:v.value}))),k=n((()=>({tabindex:c.value,ariaLabel:e.label||"counter value",ariaValuemin:e.min,ariaValuemax:e.max,..._(a,["class","style"]),...I(e,["disabled","min","max","step"]),readonly:e.readonly||!e.manualInput}))),B=n((()=>({...I(e,["color","readonly","disabled","messages","label","bordered","outline"])}))),h=n((()=>[a.class,{"va-counter--input-square":g.value}])),L=n((()=>({width:P(e.width),...a.style||{}}))),$=n((()=>P(e.margins)));return{input:s,valueComputed:l,isFocused:r,fieldListeners:M(t),inputListeners:A(t),inputAttributesComputed:k,inputWrapperPropsComputed:B,setCountInput:({target:e})=>{l.value=Number(null==e?void 0:e.value)},setCountChange:({target:e})=>{calculateCounterValue(Number(null==e?void 0:e.value))},decreaseCount:decreaseCount,increaseCount:increaseCount,decreaseIconProps:b,increaseIconProps:y,decreaseButtonProps:x,increaseButtonProps:V,colorComputed:C,classComputed:h,styleComputed:L,marginComputed:$,focus:u,blur:i}}});const E={ref:"input",tabindex:"0"},R=["value"];W.render=function render(e,t,o,n,j,_){const I=a("va-button"),x=a("va-icon"),N=a("VaInputWrapper");return s(),r(N,u({class:"va-counter"},{...e.fieldListeners,...e.inputWrapperPropsComputed},{class:e.classComputed,style:e.styleComputed,focused:e.isFocused,onKeydown:[t[8]||(t[8]=i(l((t=>e.increaseCount()),["prevent"]),["up"])),t[9]||(t[9]=i(l((t=>e.decreaseCount()),["prevent"]),["down"]))]}),p({default:m((()=>[e.$slots.content?d("v-if",!0):(s(),c("input",u({key:0,ref:"input",class:"va-input__content__input",type:"number",inputmode:"decimal"},{...e.inputAttributesComputed,...e.inputListeners},{value:e.valueComputed,onInput:t[6]||(t[6]=(...t)=>e.setCountInput&&e.setCountInput(...t)),onChange:t[7]||(t[7]=(...t)=>e.setCountChange&&e.setCountChange(...t))}),null,16,R))])),_:2},[e.$props.buttons?{name:"prepend",fn:m((o=>[v("div",{class:"va-counter__prepend-wrapper",style:f({marginRight:e.marginComputed}),onMousedown:t[1]||(t[1]=l((t=>e.focus()),["prevent"]))},[C(e.$slots,"decreaseAction",b(y({...o,decreaseCount:e.decreaseCount})),(()=>[g(I,u({class:"va-counter__button-decrease","aria-label":"decrease counter"},e.decreaseButtonProps,{onClick:t[0]||(t[0]=t=>e.decreaseCount())}),null,16)]))],36)]))}:{name:"prependInner",fn:m((o=>[v("div",{onMousedown:t[2]||(t[2]=l((t=>e.focus()),["prevent"]))},[C(e.$slots,"decreaseAction",b(y({...o,decreaseCount:e.decreaseCount})),(()=>[g(x,u({class:"va-counter__icon-decrease"},e.decreaseIconProps),null,16)]))],32)]))},e.$props.buttons?{name:"append",fn:m((o=>[v("div",{class:"va-counter__append-wrapper",style:f({marginLeft:e.marginComputed}),onMousedown:t[4]||(t[4]=l((t=>e.focus()),["prevent"]))},[C(e.$slots,"increaseAction",b(y({...o,increaseCount:e.increaseCount})),(()=>[g(I,u({class:"va-counter__button-increase","aria-label":"increase counter"},e.increaseButtonProps,{onClick:t[3]||(t[3]=t=>e.increaseCount())}),null,16)]))],36)]))}:{name:"appendInner",fn:m((o=>[v("div",{onMousedown:t[5]||(t[5]=l((t=>e.focus()),["prevent"]))},[C(e.$slots,"increaseAction",b(y({...o,increaseCount:e.increaseCount})),(()=>[g(x,u({class:"va-counter__icon-increase"},e.increaseIconProps),null,16)]))],32)]))},e.$slots.content?{name:"content",fn:m((t=>[v("div",E,[C(e.$slots,"content",b(y({...t,value:Number(e.valueComputed)})))],512)]))}:void 0]),1040,["class","style","focused"])},W.__file="src/components/va-counter/VaCounter.vue";const T=e(W);export{T as VaCounter};
//# sourceMappingURL=index22.mjs.map
