import{w as e}from"./withConfigTransport.mjs";import{computed as t,onMounted as o,onBeforeUnmount as r,ref as i,watch as a,defineComponent as l,resolveComponent as s,openBlock as n,createElementBlock as u,normalizeClass as m,normalizeStyle as d,Fragment as c,withKeys as v,withModifiers as p,renderSlot as f,createVNode as h,withCtx as g,createCommentVNode as y,renderList as S,mergeProps as _,normalizeProps as j,guardReactiveProps as C,createTextVNode as x,toDisplayString as w,createElementVNode as b}from"vue";import"./global-config.mjs";import"./usePopover.mjs";import"./global-utils.mjs";import{u as T}from"./useColors.mjs";import"colortranslator";import{a as $,u as B,b as A}from"./useStateful.mjs";import{VaImage as k}from"./index32.mjs";import{VaButton as V}from"./index12.mjs";import{VaHover as P}from"./index30.mjs";import"./VaConfig.mjs";import"./global-properties.mjs";import"./isSymbol.mjs";import"./ssr-utils.mjs";import"./VaButton.mjs";import"./useLoading.mjs";import"./useRouterLink.mjs";import"./useSize.mjs";import"./useTextColor.mjs";import"./index31.mjs";import"./VaIcon.mjs";import"./index43.mjs";import"./clamp.mjs";import"./toNumber.mjs";const useCarouselAnimation=(e,l)=>{let s=-1,n=1;const start=()=>{e.autoscroll&&(clearInterval(s),s=setInterval((()=>{e.infinite?(l.value+=1,l.value>=e.items.length&&(l.value=0)):(l.value<=0&&(n=1),l.value>=e.items.length-1&&(n=-1),l.value+=n)}),e.autoscrollInterval))};let u;const pause=()=>{e.autoscroll&&(clearInterval(s),u=setTimeout((()=>{start(),clearTimeout(u)}),e.autoscrollPauseDuration))},stop=()=>{clearInterval(s),clearTimeout(u)};o((()=>start())),r((()=>stop()));const m=i({transition:void 0}),d=i(0),c=t((()=>"fade"===e.effect?{...m.value,transition:"none"}:e.vertical?{...m.value,transform:`translateY(${-100*d.value}%)`}:{...m.value,transform:`translateX(${-100*d.value}%)`})),v={isAnimating:!1,speed:.3,order:[],move(t,o){const r=e.items.length-1,i=e.items.length;0===o&&t===r?(this.order.push({to:i}),this.order.push({to:0,animate:!1})):o===r&&0===t?(this.order.push({to:i,animate:!1}),this.order.push({to:o})):this.order.push({to:o}),this.isAnimating||this.runAnimation()},runAnimation(){this.isAnimating=!0;const e=this.order.shift();e?(d.value=null==e?void 0:e.to,e.animate||void 0===e.animate?(m.value.transition=`all ${this.speed}s linear`,setTimeout((()=>{this.runAnimation()}),1e3*this.speed)):(m.value.transition="none",setTimeout((()=>{this.runAnimation()}),16))):this.isAnimating=!1}};a(l,((e,t)=>{v.move(t,e)}));const p=t((()=>"fade"===e.effect?[e.items[l.value]]:e.infinite?[...e.items,e.items[0]]:e.items));return{start:start,pause:pause,stop:stop,withPause:e=>(...t)=>{pause(),e(...t)},computedSlidesStyle:c,slides:p}},useCarouselColor=()=>{const{setHSLAColor:e,getColor:o}=T();return{computedColor:t((()=>e(o("dark"),{a:.7}))),computedHoverColor:t((()=>e(o("primary"),{a:.7}))),computedActiveColor:t((()=>o("primary")))}};var I=l({name:"VaCarousel",components:{VaImage:k,VaButton:V,VaHover:P},props:{...$,modelValue:{type:Number,default:0},items:{type:Array,required:!0},autoscroll:{type:Boolean,default:!1},autoscrollInterval:{type:Number,default:1e3},autoscrollPauseDuration:{type:Number,default:2e3},infinite:{type:Boolean,default:!1},fadeKeyframe:{type:String,default:"va-carousel-fade-appear 1s"},arrows:{type:Boolean,default:!0},indicators:{type:Boolean,default:!0},indicatorTrigger:{type:String,default:"click",validator:e=>["click","hover"].includes(e)},vertical:{type:Boolean,default:!1},height:{type:String,default:"300px"},effect:{type:String,default:"transition",validator:e=>["fade","transition"].includes(e)},color:{type:String,default:"primary"}},emits:B,setup(e,{emit:o}){const{valueComputed:r}=A(e,o,0),{goTo:i,next:a,prev:l,doShowNextButton:s,doShowPrevButton:n}=((e,o)=>({doShowPrevButton:t((()=>o.value>0||e.infinite)),doShowNextButton:t((()=>o.value<e.items.length-1||e.infinite)),goTo:e=>{o.value=e},prev:()=>{e.infinite&&o.value<=0?o.value=e.items.length-1:o.value-=1},next:()=>{e.infinite&&o.value>=e.items.length-1?o.value=0:o.value+=1}}))(e,r),{withPause:u,computedSlidesStyle:m,slides:d}=useCarouselAnimation(e,r),c=t((()=>e.items.length&&e.items.every((e=>!!e&&"object"==typeof e&&!!(null==e?void 0:e.src)))));return{doShowNextButton:s,doShowPrevButton:n,computedSlidesStyle:m,goTo:u(i),prev:u(l),next:u(a),slides:d,isObjectSlides:c,isCurrentSlide:e=>+e===r.value,...useCarouselColor()}}});const N={key:1,class:"va-carousel__indicators"},H={class:"va-carousel__content"},K=["aria-hidden","aria-current","aria-label"];I.render=function render(e,t,o,r,i,a){const l=s("va-button"),T=s("va-hover"),$=s("va-image");return n(),u("div",{class:m(["va-carousel",{"va-carousel--vertical":e.$props.vertical,[`va-carousel--${e.$props.effect}`]:!0}]),style:d({height:e.height}),role:"region","aria-label":"carousel"},[e.$props.arrows?(n(),u(c,{key:0},[e.doShowPrevButton?(n(),u("div",{key:0,class:"va-carousel__arrow va-carousel__arrow--left",onClick:t[0]||(t[0]=(...t)=>e.prev&&e.prev(...t)),onKeydown:t[1]||(t[1]=v(p(((...t)=>e.prev&&e.prev(...t)),["stop"]),["enter"]))},[f(e.$slots,"prev-arrow",{},(()=>[h(T,{stateful:""},{default:g((({hover:t})=>[h(l,{color:t?e.computedHoverColor:e.computedColor,icon:e.vertical?"expand_less":"chevron_left","aria-label":"go previous slide"},null,8,["color","icon"])])),_:1})]))],32)):y("v-if",!0),e.doShowNextButton?(n(),u("div",{key:1,class:"va-carousel__arrow va-carousel__arrow--right",onClick:t[2]||(t[2]=(...t)=>e.next&&e.next(...t)),onKeydown:t[3]||(t[3]=v(p(((...t)=>e.next&&e.next(...t)),["stop"]),["enter"]))},[f(e.$slots,"next-arrow",{},(()=>[h(T,{stateful:""},{default:g((({hover:t})=>[h(l,{color:t?e.computedHoverColor:e.computedColor,icon:e.vertical?"expand_more":"chevron_right","aria-label":"go next slide"},null,8,["color","icon"])])),_:1})]))],32)):y("v-if",!0)],64)):y("v-if",!0),e.$props.indicators?(n(),u("div",N,[(n(!0),u(c,null,S(e.$props.items,((t,o)=>(n(),u("div",_({class:["va-carousel__indicator",{"va-carousel__indicator--active":o===e.modelValue}],key:o},"hover"===e.indicatorTrigger?{onmouseover:()=>e.goTo(o)}:{onclick:()=>e.goTo(o)}),[f(e.$slots,"indicator",j(C({item:t,index:o,goTo:e.goTo,isActive:e.isCurrentSlide(o)})),(()=>[h(T,{stateful:""},{default:g((({hover:t})=>[h(l,{"aria-label":`go slide #${o+1}`,round:"",color:e.isCurrentSlide(o)?e.computedActiveColor:t?e.computedHoverColor:e.computedColor},{default:g((()=>[x(w(o+1),1)])),_:2},1032,["aria-label","color"])])),_:2},1024)]))],16)))),128))])):y("v-if",!0),b("div",H,[b("div",{class:"va-carousel__slides",style:d(e.computedSlidesStyle),role:"list"},[(n(!0),u(c,null,S(e.slides,((t,o)=>(n(),u("div",{class:"va-carousel__slide",key:t,style:d("fade"===e.effect?{animation:e.fadeKeyframe}:""),role:"listitem","aria-hidden":!e.isCurrentSlide(o),"aria-current":e.isCurrentSlide(o),"aria-label":`slide ${o+1} of ${e.slides.length}`},[f(e.$slots,"default",j(C({item:t,index:o,goTo:e.goTo,isActive:e.isCurrentSlide(o)})),(()=>[h($,{src:e.isObjectSlides?t.src:t,alt:e.isObjectSlides?t.alt:""},null,8,["src","alt"])]))],12,K)))),128))],4)])],6)},I.__file="src/components/va-carousel/VaCarousel.vue";const L=e(I);export{L as VaCarousel};
//# sourceMappingURL=index14.mjs.map
