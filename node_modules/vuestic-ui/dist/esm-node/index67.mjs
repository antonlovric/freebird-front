import{watch as e,inject as r,onMounted as s,onBeforeUnmount as o,defineComponent as t,computed as a,openBlock as l,createElementBlock as u,normalizeStyle as i,Fragment as n,renderList as m,toDisplayString as d,createCommentVNode as p}from"vue";import{f as c}from"./usePopover.mjs";import{t as g,i as f,v,w as y}from"./global-config.mjs";import{u as V}from"./useSyncProp.mjs";import{a as S}from"./useFocus.mjs";import{F as j}from"./consts.mjs";import{w as M}from"./withConfigTransport.mjs";import"./global-utils.mjs";import{u as h}from"./useColors.mjs";var b=g,A=f,C=v;var B=function isString(e){return"string"==typeof e||!A(e)&&C(e)&&"[object String]"==b(e)};const F={modelValue:{required:!1},error:{type:Boolean,default:void 0},errorMessages:{type:[Array,String],default:void 0},errorCount:{type:[String,Number],default:1},rules:{type:Array,default:()=>[]},success:{type:Boolean,default:!1},messages:{type:[Array,String],default:()=>[]},immediateValidation:{type:Boolean,default:!1}},E=["update:error","update:errorMessages"],useValidation=(t,a,l,u)=>{const{isFocused:i,onFocus:n,onBlur:m}=S(),[d]=V("error",t,a,!1),[p]=V("errorMessages",t,a,[]),resetValidation=()=>{d.value=!1,p.value=[]},validate=()=>{if(!t.rules||!t.rules.length)return!0;let e=!1,r=[];return((e=[],r=null)=>(B(e)&&(e=[e]),e.map((e=>y(e)?e(r):e))))(c(t.rules),t.modelValue).forEach((s=>{B(s)?(r=[...r,s],e=!0):!1===s&&(e=!0)})),p.value=r,d.value=e,!e};e(i,(e=>!e&&validate())),e((()=>t.modelValue),(()=>validate()),{immediate:t.immediateValidation});const g={resetValidation:resetValidation,focus:u,validate:validate,reset:l,hasError:()=>d.value},f=r(j,void 0);return s((()=>{null==f||f.onChildMounted(g)})),o((()=>{null==f||f.onChildUnmounted(g)})),{computedError:d,computedErrorMessages:p,listeners:{onFocus:n,onBlur:m},validate:validate,resetValidation:resetValidation}};var _=t({name:"VaMessageList",props:{modelValue:{type:[String,Array],default:""},limit:{type:Number,default:1},color:{type:String}},setup(e){const{getColor:r}=h();return{messages:a((()=>e.modelValue?Array.isArray(e.modelValue)?e.modelValue.slice(0,e.limit):[e.modelValue]:[])),computedStyle:a((()=>e.color?{color:r(e.color)}:{}))}}});_.render=function render(e,r,s,o,t,a){return e.messages.length?(l(),u("div",{key:0,class:"va-message-list",style:i(e.computedStyle)},[(l(!0),u(n,null,m(e.messages,((e,r)=>(l(),u("div",{key:r,class:"va-message-list__message"},d(e),1)))),128))],4)):p("v-if",!0)},_.__file="src/components/va-input/components/VaMessageList/VaMessageList.vue";const w=M(_);export{w as V,E as a,useValidation as b,F as u};
//# sourceMappingURL=index67.mjs.map
