{"version":3,"file":"index40.mjs","sources":["../../src/components/va-parallax/VaParallax.vue","../../src/components/va-parallax/VaParallax.vue?vue&type=template&id=a3c5ce30&lang.js","../../src/components/va-parallax/index.ts"],"sourcesContent":["<template>\n  <div\n    ref=\"rootElement\"\n    class=\"va-parallax\"\n    :style=\"computedWrapperStyles\"\n  >\n    <div class=\"va-parallax__image-container\">\n      <img\n        ref=\"img\"\n        class=\"va-parallax__image\"\n        :src=\"$props.src\"\n        :alt=\"$props.alt\"\n        :style=\"computedImgStyles\"\n      />\n    </div>\n    <div class=\"va-parallax__item-container\">\n      <slot />\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, PropType, ref, computed, onMounted, onBeforeUnmount, shallowRef } from 'vue'\nimport { warn } from '../../services/utils'\n\nexport default defineComponent({\n  name: 'VaParallax',\n  props: {\n    target: { type: [Object, String] as PropType<HTMLElement | string | undefined> },\n    src: { type: String, default: '', required: true },\n    alt: { type: String, default: 'parallax' },\n    height: { type: Number, default: 400 },\n    reversed: { type: Boolean, default: false },\n    speed: {\n      type: Number,\n      default: 0.5,\n      validator: (value: number) => value >= 0 && value <= 1,\n    },\n  },\n  setup (props) {\n    const rootElement = shallowRef<HTMLElement>()\n    const img = shallowRef<HTMLImageElement>()\n\n    const elOffsetTop = ref(0)\n    const parallax = ref(0)\n    const parallaxDist = ref(0)\n    const percentScrolled = ref(0)\n    const scrollTop = ref(0)\n    const windowHeight = ref(0)\n    const windowBottom = ref(0)\n    const isLoaded = ref(false)\n\n    const computedWrapperStyles = computed(() => ({ height: props.height + 'px' }))\n\n    const computedImgStyles = computed(() => ({\n      display: 'block',\n      transform: `translate(-50%, ${parallax.value}px)`,\n      opacity: isLoaded.value ? 1 : 0,\n      top: props.reversed ? 0 : 'auto',\n    }))\n\n    const targetElement = computed(() => {\n      if (!props.target) {\n        return getScrollableParent(rootElement.value?.parentElement)\n      }\n\n      if (props.target instanceof HTMLElement) { // there is a bug if to target passed ref\n        return props.target\n      }\n\n      const element = document.querySelector(props.target)\n\n      if (element) { return element }\n\n      warn('VaParallax target prop got wrong selector. Target is null')\n      return null\n    })\n\n    const getScrollableParent = (element?: HTMLElement | null): HTMLElement | null => {\n      if (!element) {\n        return document.body\n      }\n\n      if (element.scrollHeight > element.clientHeight) {\n        return element\n      }\n\n      return getScrollableParent(element.parentElement)\n    }\n\n    const imgHeight = computed(() => img.value?.naturalHeight || 0)\n\n    const calcDimensions = () => {\n      const offset = rootElement.value?.getBoundingClientRect() || { top: 0 }\n\n      scrollTop.value = targetElement.value?.scrollTop || 0\n      parallaxDist.value = imgHeight.value - props.height\n      elOffsetTop.value = offset.top + scrollTop.value\n      windowHeight.value = window.innerHeight\n      windowBottom.value = scrollTop.value + windowHeight.value\n    }\n\n    const translate = () => {\n      calcDimensions()\n\n      percentScrolled.value = (windowBottom.value - elOffsetTop.value) / (props.height + windowHeight.value)\n\n      parallax.value = Math.round(parallaxDist.value * percentScrolled.value) * props.speed\n\n      if (props.reversed) {\n        parallax.value = -parallax.value\n      }\n    }\n\n    const addEventListeners = () => {\n      targetElement.value?.addEventListener('scroll', translate)\n      targetElement.value?.addEventListener('resize', translate)\n    }\n\n    const removeEventListeners = () => {\n      targetElement.value?.removeEventListener('scroll', translate)\n      targetElement.value?.removeEventListener('resize', translate)\n    }\n\n    const initImage = () => {\n      if (img.value?.complete) {\n        translate()\n        addEventListeners()\n      } else {\n        img.value?.addEventListener('load', () => {\n          translate()\n          addEventListeners()\n        }, false)\n      }\n\n      isLoaded.value = true\n    }\n\n    onMounted(initImage)\n    onBeforeUnmount(removeEventListeners)\n\n    return {\n      img,\n      rootElement,\n      computedWrapperStyles,\n      computedImgStyles,\n    }\n  },\n})\n</script>\n\n<style lang=\"scss\">\n@import \"../../styles/resources\";\n@import \"variables\";\n\n.va-parallax {\n  display: var(--va-parallax-display);\n  position: var(--va-parallax-position);\n  overflow: var(--va-parallax-overflow);\n  width: var(--va-parallax-width);\n  z-index: var(--va-parallax-z-index);\n  font-family: var(--va-font-family);\n\n  &__image-container {\n    position: var(--va-parallax-image-container-position);\n    top: var(--va-parallax-image-container-top);\n    left: var(--va-parallax-image-container-left);\n    right: var(--va-parallax-image-container-right);\n    bottom: var(--va-parallax-image-container-bottom);\n    z-index: var(--va-parallax-image-container-z-index);\n    contain: var(--va-parallax-image-container-contain);\n    user-select: var(--va-parallax-image-container-user-select);\n  }\n\n  &__image {\n    position: var(--va-parallax-image-position);\n    bottom: var(--va-parallax-image-bottom);\n    left: var(--va-parallax-image-left);\n    min-width: var(--va-parallax-image-min-width);\n    min-height: var(--va-parallax-image-min-height);\n    display: var(--va-parallax-image-display);\n    transform: var(--va-parallax-image-transform);\n    will-change: var(--va-parallax-image-will-change);\n    transition: var(--va-parallax-image-transition);\n    z-index: var(--va-parallax-image-z-index);\n  }\n\n  &__item-container {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    z-index: 2;\n    contain: strict;\n  }\n}\n</style>\n","<template>\n  <div\n    ref=\"rootElement\"\n    class=\"va-parallax\"\n    :style=\"computedWrapperStyles\"\n  >\n    <div class=\"va-parallax__image-container\">\n      <img\n        ref=\"img\"\n        class=\"va-parallax__image\"\n        :src=\"$props.src\"\n        :alt=\"$props.alt\"\n        :style=\"computedImgStyles\"\n      />\n    </div>\n    <div class=\"va-parallax__item-container\">\n      <slot />\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, PropType, ref, computed, onMounted, onBeforeUnmount, shallowRef } from 'vue'\nimport { warn } from '../../services/utils'\n\nexport default defineComponent({\n  name: 'VaParallax',\n  props: {\n    target: { type: [Object, String] as PropType<HTMLElement | string | undefined> },\n    src: { type: String, default: '', required: true },\n    alt: { type: String, default: 'parallax' },\n    height: { type: Number, default: 400 },\n    reversed: { type: Boolean, default: false },\n    speed: {\n      type: Number,\n      default: 0.5,\n      validator: (value: number) => value >= 0 && value <= 1,\n    },\n  },\n  setup (props) {\n    const rootElement = shallowRef<HTMLElement>()\n    const img = shallowRef<HTMLImageElement>()\n\n    const elOffsetTop = ref(0)\n    const parallax = ref(0)\n    const parallaxDist = ref(0)\n    const percentScrolled = ref(0)\n    const scrollTop = ref(0)\n    const windowHeight = ref(0)\n    const windowBottom = ref(0)\n    const isLoaded = ref(false)\n\n    const computedWrapperStyles = computed(() => ({ height: props.height + 'px' }))\n\n    const computedImgStyles = computed(() => ({\n      display: 'block',\n      transform: `translate(-50%, ${parallax.value}px)`,\n      opacity: isLoaded.value ? 1 : 0,\n      top: props.reversed ? 0 : 'auto',\n    }))\n\n    const targetElement = computed(() => {\n      if (!props.target) {\n        return getScrollableParent(rootElement.value?.parentElement)\n      }\n\n      if (props.target instanceof HTMLElement) { // there is a bug if to target passed ref\n        return props.target\n      }\n\n      const element = document.querySelector(props.target)\n\n      if (element) { return element }\n\n      warn('VaParallax target prop got wrong selector. Target is null')\n      return null\n    })\n\n    const getScrollableParent = (element?: HTMLElement | null): HTMLElement | null => {\n      if (!element) {\n        return document.body\n      }\n\n      if (element.scrollHeight > element.clientHeight) {\n        return element\n      }\n\n      return getScrollableParent(element.parentElement)\n    }\n\n    const imgHeight = computed(() => img.value?.naturalHeight || 0)\n\n    const calcDimensions = () => {\n      const offset = rootElement.value?.getBoundingClientRect() || { top: 0 }\n\n      scrollTop.value = targetElement.value?.scrollTop || 0\n      parallaxDist.value = imgHeight.value - props.height\n      elOffsetTop.value = offset.top + scrollTop.value\n      windowHeight.value = window.innerHeight\n      windowBottom.value = scrollTop.value + windowHeight.value\n    }\n\n    const translate = () => {\n      calcDimensions()\n\n      percentScrolled.value = (windowBottom.value - elOffsetTop.value) / (props.height + windowHeight.value)\n\n      parallax.value = Math.round(parallaxDist.value * percentScrolled.value) * props.speed\n\n      if (props.reversed) {\n        parallax.value = -parallax.value\n      }\n    }\n\n    const addEventListeners = () => {\n      targetElement.value?.addEventListener('scroll', translate)\n      targetElement.value?.addEventListener('resize', translate)\n    }\n\n    const removeEventListeners = () => {\n      targetElement.value?.removeEventListener('scroll', translate)\n      targetElement.value?.removeEventListener('resize', translate)\n    }\n\n    const initImage = () => {\n      if (img.value?.complete) {\n        translate()\n        addEventListeners()\n      } else {\n        img.value?.addEventListener('load', () => {\n          translate()\n          addEventListeners()\n        }, false)\n      }\n\n      isLoaded.value = true\n    }\n\n    onMounted(initImage)\n    onBeforeUnmount(removeEventListeners)\n\n    return {\n      img,\n      rootElement,\n      computedWrapperStyles,\n      computedImgStyles,\n    }\n  },\n})\n</script>\n\n<style lang=\"scss\">\n@import \"../../styles/resources\";\n@import \"variables\";\n\n.va-parallax {\n  display: var(--va-parallax-display);\n  position: var(--va-parallax-position);\n  overflow: var(--va-parallax-overflow);\n  width: var(--va-parallax-width);\n  z-index: var(--va-parallax-z-index);\n  font-family: var(--va-font-family);\n\n  &__image-container {\n    position: var(--va-parallax-image-container-position);\n    top: var(--va-parallax-image-container-top);\n    left: var(--va-parallax-image-container-left);\n    right: var(--va-parallax-image-container-right);\n    bottom: var(--va-parallax-image-container-bottom);\n    z-index: var(--va-parallax-image-container-z-index);\n    contain: var(--va-parallax-image-container-contain);\n    user-select: var(--va-parallax-image-container-user-select);\n  }\n\n  &__image {\n    position: var(--va-parallax-image-position);\n    bottom: var(--va-parallax-image-bottom);\n    left: var(--va-parallax-image-left);\n    min-width: var(--va-parallax-image-min-width);\n    min-height: var(--va-parallax-image-min-height);\n    display: var(--va-parallax-image-display);\n    transform: var(--va-parallax-image-transform);\n    will-change: var(--va-parallax-image-will-change);\n    transition: var(--va-parallax-image-transition);\n    z-index: var(--va-parallax-image-z-index);\n  }\n\n  &__item-container {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    z-index: 2;\n    contain: strict;\n  }\n}\n</style>\n","import withConfigTransport from '../../services/config-transport/withConfigTransport'\nimport _VaParallax from './VaParallax.vue'\n\nexport const VaParallax = withConfigTransport(_VaParallax)\n"],"names":["script","defineComponent","name","props","target","type","Object","String","src","default","required","alt","height","Number","reversed","Boolean","speed","validator","value","setup","rootElement","shallowRef","img","elOffsetTop","ref","parallax","parallaxDist","percentScrolled","scrollTop","windowHeight","windowBottom","isLoaded","computedWrapperStyles","computed","computedImgStyles","display","transform","opacity","top","targetElement","getScrollableParent","_a","parentElement","HTMLElement","element","document","querySelector","warn","scrollHeight","clientHeight","body","imgHeight","naturalHeight","translate","offset","getBoundingClientRect","_b","window","innerHeight","calcDimensions","Math","round","addEventListeners","addEventListener","onMounted","complete","onBeforeUnmount","removeEventListener","_hoisted_1","class","_hoisted_3","_createElementBlock","style","_ctx","_createElementVNode","$props","_renderSlot","$slots","VaParallax","withConfigTransport","_VaParallax"],"mappings":"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"}