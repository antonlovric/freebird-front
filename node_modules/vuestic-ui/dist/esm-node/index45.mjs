import{w as e}from"./withConfigTransport.mjs";import{ref as o,computed as t,getCurrentInstance as a,defineComponent as r,shallowRef as l,watch as n,resolveComponent as u,openBlock as s,createElementBlock as m,withKeys as i,renderSlot as p,createVNode as d,normalizeStyle as c,toDisplayString as v,normalizeClass as b,createElementVNode as f,Fragment as g,renderList as C,createBlock as y,mergeProps as V,createSlots as I,withCtx as L,createCommentVNode as M}from"vue";import{e as h,f as x}from"./child-props.mjs";import"./global-config.mjs";import"./usePopover.mjs";import"./global-utils.mjs";import"colortranslator";import{u as j,a as k}from"./useForm.mjs";import{c as $}from"./clamp.mjs";import{u as N}from"./useHover.mjs";import{a as E,b as F}from"./useStateful.mjs";import{u as _}from"./useColors.mjs";import{u as P}from"./useSyncProp.mjs";import{VaIcon as R}from"./index31.mjs";import{u as U,a as B}from"./useSize.mjs";import"./VaConfig.mjs";import"./global-properties.mjs";import"./isSymbol.mjs";import"./ssr-utils.mjs";import"./useBem.mjs";import"./_createCompounder.mjs";import"./toNumber.mjs";import"./VaIcon.mjs";var S;!function(e){e[e.EMPTY=0]="EMPTY",e[e.HALF=.5]="HALF",e[e.FULL=1]="FULL"}(S||(S={}));const H={...E,modelValue:{type:Number,default:0},clearable:{type:Boolean,default:!1},hover:{type:Boolean,default:!1}},useRating=e=>{const{emit:r}=(()=>{const e=a();if(!e)throw new Error("useRating hooks must be used on top of setup function");return{props:e.props,emit:e.emit}})(),{isHovered:l,onMouseEnter:n,onMouseLeave:u}=N(),{valueComputed:s}=F(e,r),m=o(0),i=t((()=>!e.disabled&&!e.readonly&&e.hover&&l.value?m.value:s.value));return{visibleValue:i,modelValue:s,hoveredValue:m,isHovered:l,onMouseEnter:n,onMouseLeave:u,onItemValueUpdate:(o,t)=>{const a=o+t;e.clearable&&s.value===a?s.value=0:s.value=a},onItemHoveredValueUpdate:(o,t)=>{e.hover&&(m.value=o+t)},getItemValue:e=>{const o=i.value-e;return $(o,S.EMPTY,S.FULL)}}},w={unselectedColor:{type:String},color:{type:String,default:"primary"},modelValue:{type:Number}},useVaRatingColors=e=>{const{getColor:o,getFocusColor:a,getTextColor:r}=_(),l=t((()=>o(e.color))),n=t((()=>e.unselectedColor?o(e.unselectedColor):a(o(e.color)))),u=t((()=>e.modelValue===S.HALF?`linear-gradient(90deg, ${l.value} 50%, ${n.value} 50%`:e.modelValue===S.EMPTY?n.value:l.value)),s=t((()=>e.modelValue===S.FULL?r(l.value):r(n.value)));return{computedColor:l,backgroundComputed:u,textColorComputed:s}};var A=r({name:"VaRatingItem",components:{VaIcon:R},props:{modelValue:{type:Number,default:0},icon:{type:String,default:"star"},halfIcon:{type:String,default:"star_half"},emptyIcon:{type:String,default:"star_outline"},halves:{type:Boolean,default:!1},hover:{type:Boolean,default:!1},tabindex:{type:Number,default:0},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},size:{type:[String,Number],default:"medium"},unselectedColor:{type:String},color:{type:String,default:"primary"}},emits:["update:modelValue","click","hover"],setup(e,{emit:a}){const r=l(),[u]=P("modelValue",e,a,S.EMPTY),s=o(null),m=t((()=>!e.hover||e.disabled||e.readonly?u.value:s.value||u.value)),{getColor:i}=_(),p=t((()=>i(e.unselectedColor&&m.value===S.EMPTY?e.unselectedColor:e.color)));return n(s,(()=>a("hover",s.value||S.EMPTY))),{computedColor:p,rootEl:r,onEnter:()=>{u.value=1},onClick:()=>{u.value=s.value||S.FULL,a("click",s.value||S.FULL)},onMouseMove:o=>{if(!r.value)return;const{offsetX:t}=o,a=r.value.clientWidth;e.halves?s.value=t/a<=S.HALF?S.HALF:S.FULL:s.value=S.FULL},onMouseLeave:()=>{s.value=null},visibleValue:m,computedIconName:t((()=>e.halves&&m.value===S.HALF?e.halfIcon:m.value===S.EMPTY?e.emptyIcon:e.icon)),tabIndexComputed:t((()=>e.disabled?-1:e.tabindex))}}});const z=["tabindex"];A.render=function render$2(e,o,t,a,r,l){const n=u("va-icon");return s(),m("div",{ref:"rootEl",class:"va-rating-item",role:"button",tabindex:e.tabIndexComputed,onKeyup:[o[0]||(o[0]=i(((...o)=>e.onClick&&e.onClick(...o)),["enter"])),o[1]||(o[1]=i(((...o)=>e.onClick&&e.onClick(...o)),["space"]))],onMousemove:o[2]||(o[2]=(...o)=>e.onMouseMove&&e.onMouseMove(...o)),onMouseleave:o[3]||(o[3]=(...o)=>e.onMouseLeave&&e.onMouseLeave(...o))},[p(e.$slots,"default",{props:{value:e.visibleValue,onClick:e.onClick}},(()=>[d(n,{class:"va-rating-item__wrapper",tabindex:"-1",tag:"button",name:e.computedIconName,size:e.$props.size,color:e.computedColor,onClick:e.onClick},null,8,["name","size","color","onClick"])]))],40,z)},A.__file="src/components/va-rating/components/VaRatingItem/VaRatingItem.vue";var T=r({name:"VaRatingItemNumberButton",props:{...w,...U,itemNumber:{type:Number,required:!0},modelValue:{type:Number,required:!0}},setup:e=>({...useVaRatingColors(e),...B(e,"VaRating")})});T.render=function render$1(e,o,t,a,r,l){return s(),m("button",{class:"va-rating__number-item",tabindex:"-1","aria-hidden":"true",style:c({background:e.backgroundComputed,color:e.textColorComputed,width:e.sizeComputed,height:e.sizeComputed,fontSize:e.fontSizeComputed,borderRadius:.125*parseInt(e.fontSizeComputed)+"rem"})},v(e.itemNumber),5)},T.__file="src/components/va-rating/components/VaRatingItemNumberButton.vue";const Y=h(A),K=h(T,["modelValue","itemNumber"]);var q=r({name:"VaRating",props:{...H,...w,...j,...Y,...K,numbers:{type:Boolean,default:!1},halves:{type:Boolean,default:!1},max:{type:Number,default:5},texts:{type:Array,default:()=>[]}},emits:["update:modelValue"],components:{VaRatingItem:A,VaRatingItemNumberButton:T},setup(e){const{computedClasses:o}=k("va-rating",e),a=useRating(e),r=t((()=>!e.disabled&&!e.readonly));return{...useVaRatingColors(e),...a,rootClass:o,VaRatingItemProps:x(e,Y),VaRatingItemNumberButtonProps:x(e,K),isInteractionsEnabled:r,tabIndexComputed:t((()=>r.value?0:void 0)),onArrowKeyPress:o=>{const t=e.halves?S.HALF:S.FULL;a.onItemValueUpdate(a.visibleValue.value,t*o)}}}});const W=["aria-label"];q.render=function render(e,o,t,a,r,l){const n=u("VaRatingItemNumberButton"),p=u("va-rating-item");return s(),m("div",{class:b(["va-rating",e.rootClass]),"aria-label":`current rating ${e.$props.modelValue} of ${e.$props.max}`},[f("div",{class:"va-rating__item-wrapper",onKeyup:[o[0]||(o[0]=i((o=>e.onArrowKeyPress(-1)),["left"])),o[1]||(o[1]=i((o=>e.onArrowKeyPress(1)),["right"]))],onMouseenter:o[2]||(o[2]=(...o)=>e.onMouseEnter&&e.onMouseEnter(...o)),onMouseleave:o[3]||(o[3]=(...o)=>e.onMouseLeave&&e.onMouseLeave(...o))},[(s(!0),m(g,null,C(e.$props.max,(o=>(s(),y(p,V({key:o},e.VaRatingItemProps,{"aria-label":`vote rating ${o} of ${e.$props.max}`,"model-value":e.getItemValue(o-1),tabindex:e.tabIndexComputed,disabled:e.$props.disabled,readonly:e.$props.readonly,onHover:t=>e.isInteractionsEnabled&&e.onItemHoveredValueUpdate(o-1,t),"onUpdate:modelValue":t=>e.isInteractionsEnabled&&e.onItemValueUpdate(o-1,t)}),I({_:2},[e.$props.numbers?{name:"default",fn:L((({props:t})=>[d(n,V(e.VaRatingItemNumberButtonProps,{"model-value":t.value,"item-number":o,onClick:t.onClick}),null,16,["model-value","item-number","onClick"])]))}:void 0]),1040,["aria-label","model-value","tabindex","disabled","readonly","onHover","onUpdate:modelValue"])))),128))],32),e.$props.texts&&e.$props.texts.length===e.$props.max?(s(),m("span",{key:0,class:"va-rating__text-wrapper",style:c({color:e.computedColor})},v(e.$props.texts[Math.round(e.visibleValue)-1]),5)):M("v-if",!0)],10,W)},q.__file="src/components/va-rating/VaRating.vue";const X=e(A),D=e(q);export{D as VaRating,X as VaRatingItem};
//# sourceMappingURL=index45.mjs.map
