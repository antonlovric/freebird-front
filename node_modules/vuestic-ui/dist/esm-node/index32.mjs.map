{"version":3,"file":"index32.mjs","sources":["../../src/components/va-image/VaImage.vue","../../src/components/va-image/VaImage.vue?vue&type=template&id=7ef4d00a&lang.js","../../src/components/va-image/index.ts"],"sourcesContent":["<template>\n  <div class=\"va-image\" aria-live=\"polite\">\n    <div\n      v-if=\"loadingError\"\n      class=\"va-image__error\"\n    >\n      <slot name=\"error\" />\n    </div>\n\n    <div :style=\"paddingStyles\" />\n    <div\n      v-show=\"!loadingError && !loading\"\n      class=\"va-image__img\"\n    >\n      <img\n        :style=\"imageStyles\"\n        :src=\"$props.src\"\n        :alt=\"$props.alt\"\n        @error=\"handleError\"\n        @load=\"handleLoad\"\n      />\n    </div>\n    <div class=\"va-image__overlay\">\n      <slot />\n    </div>\n    <div\n      v-if=\"loading\"\n      class=\"va-image__loader\"\n    >\n      <slot name=\"loader\" />\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, computed, watch, ref } from 'vue'\n\nexport default defineComponent({\n  name: 'VaImage',\n  emits: ['loaded', 'error'],\n  props: {\n    ratio: { type: Number, default: 1 },\n    contain: { type: Boolean, default: false },\n    src: { type: String, required: true },\n    alt: { type: String, default: '' },\n  },\n  setup (props, { emit }) {\n    const loading = ref(true)\n    const loadingError = ref(false)\n\n    const imageStyles = computed(() => ({\n      objectFit: props.contain ? 'contain' as const : 'cover' as const,\n    }))\n\n    const paddingStyles = computed(() => ({\n      paddingBottom: `${1 / props.ratio * 100}%`,\n    }))\n\n    const handleLoad = () => {\n      loading.value = false\n      emit('loaded', props.src)\n    }\n\n    const handleError = (err: Event) => {\n      loadingError.value = true\n      loading.value = false\n      emit('error', err)\n    }\n\n    watch(() => props.src, () => {\n      loading.value = true\n      loadingError.value = false\n    })\n\n    return {\n      loading,\n      loadingError,\n      imageStyles,\n      paddingStyles,\n      handleLoad,\n      handleError,\n    }\n  },\n})\n</script>\n\n<style lang=\"scss\">\n@import \"../../styles/resources\";\n@import \"variables\";\n\n.va-image {\n  overflow: var(--va-image-overflow);\n  position: var(--va-image-position);\n  font-family: var(--va-font-family);\n\n  img {\n    height: 100%;\n    width: 100%;\n  }\n\n  &__img,\n  &__loader,\n  &__error,\n  &__overlay {\n    position: absolute;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n  }\n\n  &__loader,\n  &__error,\n  &__overlay {\n    @include flex-center();\n  }\n}\n</style>\n","<template>\n  <div class=\"va-image\" aria-live=\"polite\">\n    <div\n      v-if=\"loadingError\"\n      class=\"va-image__error\"\n    >\n      <slot name=\"error\" />\n    </div>\n\n    <div :style=\"paddingStyles\" />\n    <div\n      v-show=\"!loadingError && !loading\"\n      class=\"va-image__img\"\n    >\n      <img\n        :style=\"imageStyles\"\n        :src=\"$props.src\"\n        :alt=\"$props.alt\"\n        @error=\"handleError\"\n        @load=\"handleLoad\"\n      />\n    </div>\n    <div class=\"va-image__overlay\">\n      <slot />\n    </div>\n    <div\n      v-if=\"loading\"\n      class=\"va-image__loader\"\n    >\n      <slot name=\"loader\" />\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, computed, watch, ref } from 'vue'\n\nexport default defineComponent({\n  name: 'VaImage',\n  emits: ['loaded', 'error'],\n  props: {\n    ratio: { type: Number, default: 1 },\n    contain: { type: Boolean, default: false },\n    src: { type: String, required: true },\n    alt: { type: String, default: '' },\n  },\n  setup (props, { emit }) {\n    const loading = ref(true)\n    const loadingError = ref(false)\n\n    const imageStyles = computed(() => ({\n      objectFit: props.contain ? 'contain' as const : 'cover' as const,\n    }))\n\n    const paddingStyles = computed(() => ({\n      paddingBottom: `${1 / props.ratio * 100}%`,\n    }))\n\n    const handleLoad = () => {\n      loading.value = false\n      emit('loaded', props.src)\n    }\n\n    const handleError = (err: Event) => {\n      loadingError.value = true\n      loading.value = false\n      emit('error', err)\n    }\n\n    watch(() => props.src, () => {\n      loading.value = true\n      loadingError.value = false\n    })\n\n    return {\n      loading,\n      loadingError,\n      imageStyles,\n      paddingStyles,\n      handleLoad,\n      handleError,\n    }\n  },\n})\n</script>\n\n<style lang=\"scss\">\n@import \"../../styles/resources\";\n@import \"variables\";\n\n.va-image {\n  overflow: var(--va-image-overflow);\n  position: var(--va-image-position);\n  font-family: var(--va-font-family);\n\n  img {\n    height: 100%;\n    width: 100%;\n  }\n\n  &__img,\n  &__loader,\n  &__error,\n  &__overlay {\n    position: absolute;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n  }\n\n  &__loader,\n  &__error,\n  &__overlay {\n    @include flex-center();\n  }\n}\n</style>\n","import withConfigTransport from '../../services/config-transport/withConfigTransport'\nimport _VaImage from './VaImage.vue'\n\nexport const VaImage = withConfigTransport(_VaImage)\n"],"names":["script","defineComponent","name","emits","props","ratio","type","Number","default","contain","Boolean","src","String","required","alt","setup","emit","loading","ref","loadingError","imageStyles","computed","objectFit","paddingStyles","paddingBottom","watch","value","handleLoad","handleError","err","class","_hoisted_3","_hoisted_5","_openBlock","_createElementBlock","_hoisted_1","_ctx","_hoisted_2","_renderSlot","$slots","_createElementVNode","style","_withDirectives","$props","onError","args","onLoad","_vShow","_hoisted_6","VaImage","withConfigTransport","_VaImage"],"mappings":"mWAqCA,IAAAA,EAAeC,EAAgB,CAC7BC,KAAM,UACNC,MAAO,CAAC,SAAU,SAClBC,MAAO,CACLC,MAAO,CAAEC,KAAMC,OAAQC,QAAS,GAChCC,QAAS,CAAEH,KAAMI,QAASF,SAAS,GACnCG,IAAK,CAAEL,KAAMM,OAAQC,UAAU,GAC/BC,IAAK,CAAER,KAAMM,OAAQJ,QAAS,KAEhCO,MAAOX,GAAOY,KAAEA,IACd,MAAMC,EAAUC,GAAI,GACdC,EAAeD,GAAI,GAEnBE,EAAcC,GAAS,KAAO,CAClCC,UAAWlB,EAAMK,QAAU,UAAqB,YAG5Cc,EAAgBF,GAAS,KAAO,CACpCG,cAAkB,EAAIpB,EAAMC,MAAQ,IAArB,QAmBjB,OALAoB,GAAM,IAAMrB,EAAMO,MAAK,KACrBM,EAAQS,OAAQ,EAChBP,EAAaO,OAAQ,KAGhB,CACLT,QAAAA,EACAE,aAAAA,EACAC,YAAAA,EACAG,cAAAA,EACAI,WArBiB,KACjBV,EAAQS,OAAQ,EAChBV,EAAK,SAAUZ,EAAMO,MAoBrBiB,YAjBmBC,IACnBV,EAAaO,OAAQ,EACrBT,EAAQS,OAAQ,EAChBV,EAAK,QAASa,iBCjEbC,MAAM,WAAW,YAAU,mBAG5BA,MAAM,mBAQNC,EAAA,CAAAD,MAAM,iCAUHE,EAAA,CAAAF,MAAM,8BAKTA,MAAM,0DA1BV,OAAAG,IAAAC,EA8BK,MA9BLC,EA8BK,CA5BKC,EAAY,cADpBH,IAAAC,EAKK,MALLG,EAKK,CADHC,EAAoBF,EAAAG,OAAA,yBAGtBC,EAA6B,MAAA,CAAvBC,QAAOL,EAAab,wBAC1BmB,EAAAF,EAWK,MAXLT,EAWK,CAPHS,EAMC,MAAA,CALEC,QAAOL,EAAWhB,aAClBT,IAAKyB,EAAMO,OAAChC,IACZG,IAAKsB,EAAMO,OAAC7B,IACZ8B,4BAAOR,EAAWR,aAAAQ,EAAAR,eAAAiB,IAClBC,2BAAMV,EAAUT,YAAAS,EAAAT,cAAAkB,uBARV,CAAAE,GAAAX,EAAAjB,eAAiBiB,EAAOnB,WAWnCuB,EAEK,MAFLR,EAEK,CADHM,EAAOF,EAAAG,OAAA,aAGDH,EAAO,SADfH,IAAAC,EAKK,MALLc,EAKK,CADHV,EAAqBF,EAAAG,OAAA,kFC1BdU,EAAUC,EAAoBC"}