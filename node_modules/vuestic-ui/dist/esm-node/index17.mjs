import{w as e}from"./withConfigTransport.mjs";import{defineComponent as o,shallowRef as l,computed as a,resolveComponent as t,openBlock as s,createElementBlock as r,normalizeClass as d,createElementVNode as i,mergeProps as u,toHandlers as n,withKeys as c,renderSlot as p,normalizeProps as m,guardReactiveProps as v,createBlock as b,createCommentVNode as g,toDisplayString as y,createVNode as f,normalizeStyle as h}from"vue";import"./global-config.mjs";import"./usePopover.mjs";import"./global-utils.mjs";import{u as C}from"./useColors.mjs";import{u as _}from"./useKeyboardOnlyFocus.mjs";import{u as j}from"./useSyncProp.mjs";import{g as x}from"./utils.mjs";import{u as S}from"./useTextColor.mjs";import{a as V}from"./useAccordion.mjs";import{VaIcon as F}from"./index31.mjs";import"./VaConfig.mjs";import"./global-properties.mjs";import"./isSymbol.mjs";import"./ssr-utils.mjs";import"colortranslator";import"./VaIcon.mjs";import"./useSize.mjs";var k=o({name:"VaCollapse",components:{VaIcon:F},props:{modelValue:{type:Boolean,default:void 0},disabled:{type:Boolean,default:!1},header:{type:String,default:""},icon:{type:String,default:""},solid:{type:Boolean,default:!1},color:{type:String,default:"background"},textColor:{type:String,default:""},colorAll:{type:Boolean,default:!1}},emits:["focus","update:modelValue"],setup(e,{emit:o,slots:t}){const s=l(),[r]=j("modelValue",e,o,!1),{getColor:d,getHoverColor:i}=C(),{accordionProps:u,toggle:n}=V(r),{textColorComputed:c}=S(),getNodeHeight=e=>"#text"===e.nodeName?(e=>{const o=document.createRange();o.selectNodeContents(e);const l=o.getBoundingClientRect();return l.bottom-l.top})(e):"#comment"===e.nodeName?0:e.clientHeight,p=a((()=>{if(!r.value||!s.value)return 0;return Array.from(s.value.childNodes).reduce(((e,o)=>e+getNodeHeight(o)),0)})),{hasKeyboardFocus:m,keyboardFocusListeners:v}=_(),getTransition=()=>{const e=p.value/1e3*.2;return`${e>.2?e:.2}s`},b=a(x),g=a((()=>`header-${b.value}`)),y=a((()=>`panel-${b.value}`)),f=a((()=>e.disabled?-1:0)),h=a((()=>({id:g.value,tabindex:f.value,"aria-controls":y.value,"aria-expanded":r.value,"aria-disabled":e.disabled,role:"button"})));return{body:s,height:p,toggle:n,computedModelValue:r,hasKeyboardFocus:m,keyboardFocusListeners:v,textColorComputed:c,headerIdComputed:g,headerAttributes:h,panelIdComputed:y,tabIndexComputed:f,computedClasses:a((()=>({"va-collapse--expanded":r.value,"va-collapse--disabled":e.disabled,"va-collapse--solid":e.solid,"va-collapse--active":e.solid&&r.value,"va-collapse--popout":u.value.popout&&r.value,"va-collapse--inset":u.value.inset&&r.value}))),headerStyle:a((()=>({paddingLeft:e.icon&&0,color:c.value,backgroundColor:e.color?d(e.color):""}))),contentStyle:a((()=>{var o;const l=r.value&&!!(null===(o=t.default)||void 0===o?void 0:o.call(t)[0]);return{visibility:l?"visible":"hidden",height:`${p.value}px`,transitionDuration:getTransition(),background:l&&e.color&&e.colorAll?i(d(e.color)):""}}))}}});const A={class:"va-collapse__header__text"},I=["id","aria-labelledby"];k.render=function render(e,o,l,a,C,_){const j=t("va-icon");return s(),r("div",{class:d(["va-collapse",e.computedClasses])},[i("div",u({class:"va-collapse__header-wrapper"},n(e.keyboardFocusListeners),{onFocus:o[0]||(o[0]=o=>e.$emit("focus")),onClick:o[1]||(o[1]=(...o)=>e.toggle&&e.toggle(...o)),onKeydown:[o[2]||(o[2]=c(((...o)=>e.toggle&&e.toggle(...o)),["enter"])),o[3]||(o[3]=c(((...o)=>e.toggle&&e.toggle(...o)),["space"]))]}),[p(e.$slots,"header",m(v({value:e.computedModelValue,hasKeyboardFocus:e.hasKeyboardFocus,bind:e.headerAttributes,attributes:e.headerAttributes})),(()=>[i("div",u(e.headerAttributes,{class:"va-collapse__header",style:e.headerStyle}),[e.icon?(s(),b(j,{key:0,class:"va-collapse__header__icon",name:e.icon,color:e.textColorComputed},null,8,["name","color"])):g("v-if",!0),i("div",A,y(e.header),1),f(j,{class:"va-collapse__header__icon",name:e.computedModelValue?"expand_less":"expand_more",color:e.textColorComputed},null,8,["name","color"])],16)]))],16),i("div",{ref:"body",class:"va-collapse__body",role:"region",style:h(e.contentStyle),id:e.panelIdComputed,"aria-labelledby":e.headerIdComputed},[p(e.$slots,"default")],12,I)],2)},k.__file="src/components/va-collapse/VaCollapse.vue";const $=e(k);export{$ as VaCollapse};
//# sourceMappingURL=index17.mjs.map
