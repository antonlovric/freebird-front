import{w as e}from"./withConfigTransport.mjs";import{unref as o,isRef as t,watch as n,defineComponent as a,shallowRef as r,computed as l,toRef as s,openBlock as d,createElementBlock as c,normalizeClass as u,createElementVNode as i,renderSlot as p,createBlock as m,Teleport as v,withModifiers as f,createCommentVNode as C,normalizeStyle as b}from"vue";import{p as h,u as k,e as g}from"./usePopover.mjs";import{u as y}from"./useBem.mjs";import{u as w}from"./useCaptureEvent.mjs";import"./global-config.mjs";import"colortranslator";import{d as j}from"./debounce.mjs";import{a as A,u as O,b as S}from"./useStateful.mjs";import"./global-utils.mjs";import{u as M}from"./useColors.mjs";import{u as B}from"./useTextColor.mjs";import"./VaConfig.mjs";import"./isSymbol.mjs";import"./ssr-utils.mjs";import"./_createCompounder.mjs";import"./global-properties.mjs";import"./toNumber.mjs";const useClickOutside=(e,t)=>{w("click",(n=>{const a=n.target;var r;(r=e,Array.isArray(r)?r:[r]).some((e=>{return o(e)&&(t=o(e),!!(n=a)&&(n.parentElement===t||t.contains(n)));var t,n}))||t(a)}))},useDebounceFn=e=>{let a=null;const createDebounced=()=>j((()=>{null==a||a(),a=null}),o(e));let r=createDebounced();return t(e)&&n(e,(()=>{r=createDebounced()})),{debounced:e=>{a=e,r()},cancel:()=>r.cancel()}};var _=a({name:"VaDropdown",props:{...A,stateful:{default:!0},modelValue:{type:Boolean,default:!1},disabled:{type:Boolean},readonly:{type:Boolean},anchorSelector:{type:String,default:""},attachElement:{type:String,default:"body"},disableAttachment:{type:Boolean,default:!1},keepAnchorWidth:{type:Boolean,default:!1},isContentHoverable:{type:Boolean,default:!0},closeOnContentClick:{type:Boolean,default:!0},closeOnClickOutside:{type:Boolean,default:!0},closeOnAnchorClick:{type:Boolean,default:!0},hoverOverTimeout:{type:Number,default:30},hoverOutTimeout:{type:Number,default:200},offset:{type:[Array,Number],default:0},trigger:{type:String,default:"click",validator:e=>["click","hover","none"].includes(e)},placement:{type:String,default:"bottom",validator:e=>h.includes(e)}},emits:[...O,"anchor-click","dropdown-content-click","click-outside"],setup(e,{emit:o}){const t=r(),n=r(),{valueComputed:a}=S(e,o),d=l({get:()=>a.value&&!e.disabled&&!e.readonly,set(e){a.value=e}}),c=y("va-dropdown",(()=>g(e,["disabled"]))),u=l((()=>t.value&&e.anchorSelector&&t.value.querySelector(e.anchorSelector)||t.value));k(u,n,l((()=>({placement:e.placement,keepAnchorWidth:e.keepAnchorWidth,offset:e.offset,stickToEdges:!0,autoPlacement:!0,root:e.attachElement}))));const{debounced:i,cancel:p}=useDebounceFn(s(e,"hoverOverTimeout")),{debounced:m,cancel:v}=useDebounceFn(s(e,"hoverOutTimeout")),emitAndClose=(e,t)=>{o(e),t&&(d.value=!1)};return useClickOutside([t,n],(()=>{e.closeOnClickOutside&&d.value&&emitAndClose("click-outside",e.closeOnClickOutside)})),{valueComputed:d,anchorRef:t,contentRef:n,computedClass:c,emitAndClose:emitAndClose,onAnchorClick:()=>{"click"!==e.trigger||e.disabled||(d.value?emitAndClose("anchor-click",e.closeOnAnchorClick):(d.value=!0,o("anchor-click")))},onMouseEnter:()=>{"hover"!==e.trigger||e.disabled||(i((()=>{d.value=!0})),v())},onMouseLeave:()=>{"hover"!==e.trigger||e.disabled||(e.isContentHoverable?m((()=>{d.value=!1})):d.value=!1,p())}}}});const E=["aria-disabled","aria-expanded"];_.render=function render$1(e,o,t,n,a,r){return d(),c("div",{class:u(["va-dropdown",e.computedClass]),"aria-haspopup":"listbox","aria-disabled":e.$props.disabled,"aria-expanded":!!e.valueComputed},[i("div",{ref:"anchorRef",class:"va-dropdown__anchor",onClick:o[0]||(o[0]=(...o)=>e.onAnchorClick&&e.onAnchorClick(...o)),onMouseenter:o[1]||(o[1]=(...o)=>e.onMouseEnter&&e.onMouseEnter(...o)),onMouseleave:o[2]||(o[2]=(...o)=>e.onMouseLeave&&e.onMouseLeave(...o))},[p(e.$slots,"anchor")],544),e.valueComputed?(d(),m(v,{key:0,to:e.attachElement,disabled:e.disableAttachment},[i("div",{ref:"contentRef",class:"va-dropdown__content-wrapper",onMouseover:o[3]||(o[3]=o=>e.$props.isContentHoverable&&e.onMouseEnter()),onMouseout:o[4]||(o[4]=(...o)=>e.onMouseLeave&&e.onMouseLeave(...o)),onClick:o[5]||(o[5]=f((o=>e.emitAndClose("dropdown-content-click",e.closeOnContentClick)),["stop"]))},[p(e.$slots,"default")],544)],8,["to","disabled"])):C("v-if",!0)],10,E)},_.__file="src/components/va-dropdown/VaDropdown.vue";var x=a({name:"VaDropdownContent",props:{noPadding:{type:Boolean,default:!1},background:{type:String,default:"white"},textColor:{type:String}},setup(e){const{getColor:o}=M(),{textColorComputed:t}=B(s(e,"background"));return{computedStyle:l((()=>({background:o(e.background,void 0,!0),color:t.value,padding:e.noPadding?0:void 0})))}}});x.render=function render(e,o,t,n,a,r){return d(),c("div",{class:"va-dropdown__content",style:b(e.computedStyle),role:"listbox"},[p(e.$slots,"default")],4)},x.__file="src/components/va-dropdown/components/VaDropdownContent/VaDropdownContent.vue";const T=e(x),V=e(_);export{V as VaDropdown,T as VaDropdownContent};
//# sourceMappingURL=index27.mjs.map
