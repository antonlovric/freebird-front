import{w as e}from"./withConfigTransport.mjs";import{defineComponent as o,h as t,Transition as a,shallowRef as l,toRef as s,computed as n,watch as i,resolveComponent as r,openBlock as d,createElementBlock as c,normalizeClass as m,renderSlot as u,normalizeProps as p,guardReactiveProps as f,createCommentVNode as v,createBlock as y,Teleport as g,createVNode as k,mergeProps as b,withCtx as h,normalizeStyle as C,createElementVNode as x,withKeys as _,Fragment as $,toDisplayString as T,createTextVNode as B}from"vue";import"./global-config.mjs";import"./usePopover.mjs";import"./global-utils.mjs";import{u as S}from"./useColors.mjs";import{u as E,a as A,b as w}from"./useStateful.mjs";import{u as L}from"./useTextColor.mjs";import{VaButton as D}from"./index12.mjs";import{VaIcon as z}from"./index31.mjs";const O=o({name:"ModalElement",inheritAttrs:!1,props:{isTransition:{type:Boolean,default:!0}},setup:(e,{slots:o,attrs:l})=>()=>{var s;return e.isTransition?t(a,{...l},o):null===(s=o.default)||void 0===s?void 0:s.call(o,l)}});var j=o({name:"VaModal",inheritAttrs:!1,components:{VaButton:D,VaIcon:z,ModalElement:O},emits:[...E,"cancel","ok","before-open","open","before-close","close","click-outside"],props:{...A,modelValue:{type:Boolean,default:!1},attachElement:{type:String,default:"body"},disableAttachment:{type:Boolean,default:!1},title:{type:String,default:""},message:{type:String,default:""},okText:{type:String,default:"OK"},cancelText:{type:String,default:"Cancel"},hideDefaultActions:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},mobileFullscreen:{type:Boolean,default:!0},noDismiss:{type:Boolean,default:!1},noOutsideDismiss:{type:Boolean,default:!1},noEscDismiss:{type:Boolean,default:!1},maxWidth:{type:String,default:""},maxHeight:{type:String,default:""},anchorClass:{type:String},size:{type:String,default:"medium",validator:e=>["medium","small","large"].includes(e)},fixedLayout:{type:Boolean,default:!1},withoutTransitions:{type:Boolean,default:!1},overlay:{type:Boolean,default:!0},overlayOpacity:{type:[Number,String],default:.6},blur:{type:Boolean,default:!1},zIndex:{type:[Number,String]},backgroundColor:{type:String,default:"white"},noPadding:{type:Boolean,default:!1}},setup(e,{emit:o}){const t=l(),{getColor:a}=S(),{textColorComputed:r}=L(s(e,"backgroundColor")),{valueComputed:d}=w(e,o),c=n((()=>({"va-modal--fullscreen":e.fullscreen,"va-modal--mobile-fullscreen":e.mobileFullscreen,"va-modal--fixed-layout":e.fixedLayout,"va-modal--no-padding":e.noPadding,[`va-modal--size-${e.size}`]:"medium"!==e.size}))),m=n((()=>({"z-index":e.zIndex}))),u=n((()=>({maxWidth:e.maxWidth,maxHeight:e.maxHeight,color:r.value,background:a(e.backgroundColor)}))),p=n((()=>{const o=!!document.querySelectorAll(".va-modal__overlay").length;if(e.overlay&&!o)return{"background-color":`rgba(0, 0, 0, ${e.overlayOpacity})`,"z-index":e.zIndex&&Number(e.zIndex)-1}})),hide=()=>{d.value=!1},cancel=()=>{hide(),o("cancel")},listenKeyUp=o=>{o.modalsCounter=o.modalsCounter?o.modalsCounter+1:1;const t=o.modalsCounter;setTimeout((()=>{"Escape"!==o.code||e.noEscDismiss||e.noDismiss||o.modalsCounter!==t||cancel()}))};i(d,(o=>{o?window.addEventListener("keyup",listenKeyUp):window.removeEventListener("keyup",listenKeyUp),e.blur&&(o?document.body.classList.add("va-modal-overlay-background--blurred"):document.body.classList.remove("va-modal-overlay-background--blurred"))}),{immediate:!0});const f={show:()=>{d.value=!0},hide:hide,toggle:()=>{d.value=!d.value},cancel:cancel,ok:()=>{hide(),o("ok")},onOutsideClick:()=>{e.noOutsideDismiss||e.noDismiss||(o("click-outside"),cancel())},onBeforeEnterTransition:e=>o("before-open",e),onAfterEnterTransition:e=>o("open",e),onBeforeLeaveTransition:e=>o("before-close",e),onAfterLeaveTransition:e=>o("close",e),listenKeyUp:listenKeyUp};return{getColor:a,rootElement:t,valueComputed:d,computedClass:c,computedDialogStyle:u,computedModalContainerStyle:m,computedOverlayStyles:p,...f}}});const M=["aria-labelledby"],V={key:0,class:"va-modal__anchor"},H={key:0,class:"va-modal"},I={key:0},W={key:1,class:"va-modal__header"},K={key:2,class:"va-modal__message"},N={key:3,class:"va-modal__message"},P={key:4,class:"va-modal__footer"},F={key:5,class:"va-modal__footer"};j.render=function render(e,o,t,a,l,s){const n=r("va-icon"),i=r("va-button"),S=r("modal-element");return d(),c("div",{ref:"rootElement",class:m(["va-modal-entry",e.$props.anchorClass]),role:"dialog","aria-modal":"true","aria-labelledby":e.title},[e.$slots.anchor?(d(),c("div",V,[u(e.$slots,"anchor",p(f({show:e.show,hide:e.hide,toggle:e.toggle})))])):v("v-if",!0),(d(),y(g,{to:e.attachElement,disabled:e.$props.disableAttachment},[k(S,b({name:"va-modal",isTransition:!e.$props.withoutTransitions,appear:"",duration:300},e.$attrs,{onBeforeEnter:e.onBeforeEnterTransition,onAfterEnter:e.onAfterEnterTransition,onBeforeLeave:e.onBeforeLeaveTransition,onAfterLeave:e.onAfterLeaveTransition}),{default:h((()=>[e.valueComputed?(d(),c("div",H,[e.$props.overlay?(d(),c("div",{key:0,class:"va-modal__overlay",style:C(e.computedOverlayStyles),onClick:o[0]||(o[0]=(...o)=>e.onOutsideClick&&e.onOutsideClick(...o))},null,4)):v("v-if",!0),x("div",{class:"va-modal__container",style:C(e.computedModalContainerStyle)},[x("div",{class:m(["va-modal__dialog",e.computedClass]),style:C(e.computedDialogStyle)},[e.$props.fullscreen?(d(),y(n,{key:0,name:"close",class:"va-modal__close",role:"button","aria-label":"close","aria-hidden":"false",tabindex:"0",onClick:e.cancel,onKeydown:[_(e.cancel,["space"]),_(e.cancel,["enter"])]},null,8,["onClick","onKeydown"])):v("v-if",!0),x("div",{class:"va-modal__inner",style:C({maxWidth:e.$props.maxWidth,maxHeight:e.$props.maxHeight})},[e.$slots.content?(d(),c("div",I,[u(e.$slots,"content",p(f({cancel:e.cancel,ok:e.ok})))])):v("v-if",!0),e.$slots.content?v("v-if",!0):(d(),c($,{key:1},[e.title?(d(),c("div",{key:0,class:"va-modal__title",style:C({color:e.getColor("primary")})},T(e.$props.title),5)):v("v-if",!0),e.$slots.header?(d(),c("div",W,[u(e.$slots,"header")])):v("v-if",!0),e.$props.message?(d(),c("div",K,T(e.$props.message),1)):v("v-if",!0),e.$slots.default?(d(),c("div",N,[u(e.$slots,"default")])):v("v-if",!0),!e.$props.cancelText&&!e.$props.okText||e.$props.hideDefaultActions?v("v-if",!0):(d(),c("div",P,[e.$props.cancelText?(d(),y(i,{key:0,color:"gray",class:"mr-2",flat:"",onClick:e.cancel},{default:h((()=>[B(T(e.$props.cancelText),1)])),_:1},8,["onClick"])):v("v-if",!0),k(i,{onClick:e.ok},{default:h((()=>[B(T(e.$props.okText),1)])),_:1},8,["onClick"])])),e.$slots.footer?(d(),c("div",F,[u(e.$slots,"footer")])):v("v-if",!0)],64))],4)],6)],4)])):v("v-if",!0)])),_:3},16,["isTransition","onBeforeEnter","onAfterEnter","onBeforeLeave","onAfterLeave"])],8,["to","disabled"]))],10,M)},j.__file="src/components/va-modal/VaModal.vue";const q=e(j);export{q as V};
//# sourceMappingURL=VaModal.mjs.map
