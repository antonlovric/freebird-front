import{w as e}from"./withConfigTransport.mjs";import{ref as o,defineComponent as n,shallowRef as t,computed as r,nextTick as s,resolveComponent as a,openBlock as l,createBlock as p,normalizeClass as i,normalizeStyle as u,withKeys as d,withModifiers as m,withCtx as c,createVNode as w,mergeProps as f,toHandlers as v,createSlots as y,renderSlot as g,normalizeProps as b,guardReactiveProps as h,createCommentVNode as j,renderList as I}from"vue";import{s as D,o as V}from"./VaIcon.mjs";import{e as C,f as x}from"./child-props.mjs";import"./global-config.mjs";import"./usePopover.mjs";import"./global-utils.mjs";import{s as S,u as k,a as P}from"./VaInput.mjs";import"colortranslator";import{a as T,u as B,b as F}from"./index67.mjs";import{u as K}from"./useSyncProp.mjs";import{s as O}from"./VaTimePicker.mjs";import{VaDropdown as _,VaDropdownContent as $}from"./index27.mjs";import"./VaConfig.mjs";import"./useColors.mjs";import"./useSize.mjs";import"./global-properties.mjs";import"./isSymbol.mjs";import"./ssr-utils.mjs";import"./useFocus.mjs";import"./useEmitProxy.mjs";import"./useCaptureEvent.mjs";import"./useForm.mjs";import"./useBem.mjs";import"./_createCompounder.mjs";import"cleave.js";import"./VaInputWrapper.mjs";import"./useCSSVariables.mjs";import"./index31.mjs";import"./consts.mjs";import"./debounce.mjs";import"./toNumber.mjs";import"./useArrayRefs.mjs";import"./useStateful.mjs";import"./useTextColor.mjs";const defaultParseDateFunction=e=>{const o=new Date,[n,t,r]=(e=>{const o=e.match(/[0-9]{1,2}/g);return o?o.map((e=>Number(e))):[]})(e),s=(e=>{const o=e.match(/pm|am/i);return o?Number("pm"===o[0].toLowerCase()):null})(e);if(!n)return null;const a=null!==s&&n<=12,l=a&&!!s,p=a&&12===n?0:n;return o.setHours(Math.min(p||0,a?12:24)+(l?12:0)),o.setMinutes(Math.min(t||0,60)),o.setSeconds(Math.min(r||0,60)),o},useTimeParser=e=>{const n=o(!0),parseDate=o=>{const t=(e.parse||defaultParseDateFunction)(o);return t||(n.value=!1),t};return{parse:e=>(n.value=!0,parseDate(e)),isValid:n}},useTimeFormatter=e=>{const formatDate=o=>o?e.ampm?o.toLocaleTimeString("en-US"):o.toLocaleTimeString("en-GB"):"",sliceTime=(e,o,n)=>e.split(":").slice(o,n).join(":");return{format:o=>e.format?e.format(o):(o=>{if("seconds"===e.view)return formatDate(o);const[n,t]=formatDate(o).split(" ");return"minutes"===e.view?t?[sliceTime(n,0,2),t].join(" "):sliceTime(n,0,2):"hours"===e.view?t?[sliceTime(n,0,1),t].join(" "):sliceTime(n,0,1):""})(o)}},L=C(S,["mask","returnRaw","autosize","minRows","maxRows","type","inputmode","counter","maxLength"]);var M=n({name:"VaTimeInput",components:{VaDropdown:_,VaDropdownContent:$,VaTimePicker:O,VaIcon:D,VaInput:S},emits:[...T,...k,"update:modelValue","update:isOpen"],props:{...L,...C(O),...B,isOpen:{type:Boolean,default:void 0},modelValue:{type:Date,default:void 0},clearValue:{type:Date,default:void 0},format:{type:Function},parse:{type:Function},manualInput:{type:Boolean,default:!1},leftIcon:{type:Boolean,default:!1},icon:{type:String,default:"schedule"}},inheritAttrs:!1,setup(e,{emit:o,attrs:n,slots:a}){const l=t(),p=t(),[i]=K("isOpen",e,o,!1),[u]=K("modelValue",e,o),{parse:d,isValid:m}=useTimeParser(e),{format:c}=useTimeFormatter(e),w=r((()=>c(u.value||e.clearValue))),reset=()=>{o("update:modelValue",e.clearValue),o("clear")},focus=()=>{var e;null===(e=l.value)||void 0===e||e.focus()},{computedError:f,computedErrorMessages:v,listeners:y}=F(e,o,reset,focus),{canBeCleared:g,clearIconProps:b,onFocus:h,onBlur:j}=P(e,w),I=r((()=>g.value&&w.value!==c(e.clearValue))),D=r((()=>({name:e.icon,color:e.color,size:"small"}))),S=r((()=>({...x(e,L).value,clearable:!1,rules:[],error:f.value,errorMessages:v.value,readonly:e.readonly||!e.manualInput}))),k=r((()=>({focus:()=>{h(),y.onFocus()},blur:()=>{j(),y.onBlur()}}))),T=r((()=>e.disabled||e.readonly?-1:0)),B=r((()=>({ariaLabel:e.label||"selected time",ariaDisabled:e.disabled,ariaReadonly:e.readonly,tabindex:e.disabled?-1:0,...V(n,["class","style"])}))),_=r((()=>{const o=[e.leftIcon&&"prependInner",(!e.leftIcon||e.clearable)&&"icon"];return Object.keys(a).filter((e=>!o.includes(e)))})),hideDropdown=()=>{i.value=!1,focus()},showDropdownWithoutFocus=()=>{i.value=!0},showDropdown=(e,o,n)=>{o||(n&&(null==e||e.preventDefault()),showDropdownWithoutFocus(),s((()=>{var e;return null===(e=p.value)||void 0===e?void 0:e.focus()})))};return{input:l,timePicker:p,timePickerProps:x(e,C(O)),computedInputProps:S,computedInputAttrs:B,computedInputListeners:k,iconsTabIndexComputed:T,isOpenSync:i,modelValueSync:u,valueText:w,onInputTextChanged:e=>{if(!e)return reset();const o=d(e);m.value&&o?u.value=o:(u.value=void 0,m.value=!0)},canBeClearedComputed:I,iconProps:D,clearIconProps:b,filteredSlots:_,hideDropdown:hideDropdown,showDropdown:showDropdown,toggleDropdown:()=>{i.value?hideDropdown():showDropdown()},toggleDropdownWithoutFocus:()=>{i.value?hideDropdown():showDropdownWithoutFocus()},reset:reset,focus:focus,blur:()=>{var e;null===(e=l.value)||void 0===e||e.blur()},onFocus:h,onBlur:j}}});M.render=function render(e,o,n,t,r,s){const D=a("va-icon"),V=a("va-input"),C=a("va-time-picker"),x=a("va-dropdown-content"),S=a("va-dropdown");return l(),p(S,{class:i(["va-time-input",e.$attrs.class]),style:u(e.$attrs.style),modelValue:e.isOpenSync,"onUpdate:modelValue":o[2]||(o[2]=o=>e.isOpenSync=o),placement:"bottom-start",offset:[2,0],"close-on-content-click":!1,disabled:e.$props.disabled,anchorSelector:".va-input-wrapper__field",stateful:!1,trigger:"none",onKeydown:[d(m(e.showDropdown,["prevent"]),["up"]),d(m(e.showDropdown,["prevent"]),["down"]),o[3]||(o[3]=d((o=>e.showDropdown(o,e.$props.manualInput,!e.$props.manualInput)),["space"])),o[4]||(o[4]=d((o=>!e.$props.manualInput&&e.showDropdown()),["enter"])),d(m(e.hideDropdown,["prevent"]),["esc"])],onClick:o[5]||(o[5]=o=>(!e.$props.manualInput||e.isOpenSync)&&e.toggleDropdownWithoutFocus())},{anchor:c((()=>[w(V,f({ref:"input"},{...e.computedInputProps,...e.computedInputAttrs},v(e.computedInputListeners),{modelValue:e.valueText,onChange:o[0]||(o[0]=o=>e.onInputTextChanged(o.target.value))}),y({prependInner:c((o=>[g(e.$slots,"prependInner",b(h({...o,toggleDropdown:e.toggleDropdown,showDropdown:e.showDropdown,hideDropdown:e.hideDropdown,isOpen:e.isOpenSync,focus:e.focus}))),e.$props.leftIcon?(l(),p(D,f({key:0,role:"button","aria-label":"toggle dropdown","aria-hidden":"false",tabindex:e.iconsTabIndexComputed},e.iconProps,{onClick:m(e.toggleDropdown,["stop"]),onKeydown:d(m(e.toggleDropdown,["stop"]),["enter"])}),null,16,["tabindex","onClick","onKeydown"])):j("v-if",!0)])),icon:c((()=>[e.canBeClearedComputed?(l(),p(D,f({key:0,role:"button","aria-label":"reset","aria-hidden":"false",tabindex:e.iconsTabIndexComputed},e.clearIconProps,{onClick:m(e.reset,["stop"]),onKeydown:d(m(e.reset,["stop"]),["enter"]),onFocus:e.onFocus,onBlur:e.onBlur}),null,16,["tabindex","onClick","onKeydown","onFocus","onBlur"])):e.$props.leftIcon?j("v-if",!0):(l(),p(D,f({key:1,role:"button","aria-label":"toggle dropdown","aria-hidden":"false",class:"va-dropdown__icons__reset",tabindex:e.iconsTabIndexComputed},e.iconProps,{onClick:m(e.toggleDropdown,["stop"]),onKeydown:d(m(e.toggleDropdown,["stop"]),["enter"])}),null,16,["tabindex","onClick","onKeydown"]))])),_:2},[I(e.filteredSlots,(o=>({name:o,fn:c((n=>[g(e.$slots,o,b(h({...n,toggleDropdown:e.toggleDropdown,showDropdown:e.showDropdown,hideDropdown:e.hideDropdown,isOpen:e.isOpenSync,focus:e.focus})))]))})))]),1040,["modelValue"])])),default:c((()=>[w(x,{"no-padding":"",onKeydown:d(m(e.hideDropdown,["prevent"]),["esc"]),onKeypress:d(m(e.hideDropdown,["prevent"]),["enter"])},{default:c((()=>[w(C,f({ref:"timePicker"},e.timePickerProps,{modelValue:e.modelValueSync,"onUpdate:modelValue":o[1]||(o[1]=o=>e.modelValueSync=o)}),null,16,["modelValue"])])),_:1},8,["onKeydown","onKeypress"])])),_:3},8,["class","style","modelValue","disabled","onKeydown"])},M.__file="src/components/va-time-input/VaTimeInput.vue";const R=e(M);export{R as VaTimeInput};
//# sourceMappingURL=index51.mjs.map
