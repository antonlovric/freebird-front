import { createVuestic, createVuesticEssential } from "vuestic-ui";
import { ref } from "vue";
import { defineNuxtPlugin } from "nuxt/app";
function getGlobalProperty(app, key) {
  return app.config.globalProperties[key];
}
export default defineNuxtPlugin((nuxtApp) => {
  const { vueApp: app } = nuxtApp;
  const { config } = JSON.parse(`<%= options.value %>`);
  const withoutComponents = false;
  app.use(withoutComponents ? createVuesticEssential({ config }) : createVuestic({ config }));
  const head = getGlobalProperty(app, "$head");
  if (head) {
    const colorConfig = getGlobalProperty(app, "$vaColorConfig");
    if (colorConfig) {
      head.addHeadObjs(ref({
        htmlAttrs: {
          style: colorConfig.renderCSSVarialbes()
        }
      }));
    }
  }
});
